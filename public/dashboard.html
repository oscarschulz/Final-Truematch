<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>iTrueMatch ‚Äî Dashboard</title>
  <link rel="icon" href="assets/images/truematch-mark.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="dashboard.css" />
  <link rel="stylesheet" href="responsive.css" />
  
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body class="tm-dark">
  
  <div id="app-loader">
      <img src="assets/images/truematch-mark.png" class="loader-logo" alt="Loading...">
      <div class="loader-text">iTrueMatch</div>
  </div>

  <canvas id="tm-bg-canvas"></canvas>

  <div class="layout" id="mainLayout">
    
    <aside class="sidebar animate-enter delay-1" id="mainSidebar">
      <div>
        <a class="brand" href="dashboard.html">
          <img src="assets/images/truematch-mark.png" class="brand__logo" alt="Logo" />
          <span class="brand__name">iTrueMatch</span>
        </a>
        <nav class="nav-links" id="tabbar">
          <button class="nav-btn is-active" data-panel="home"><i class="fa-solid fa-house"></i> <span>Home</span></button>
          <button class="nav-btn" data-panel="swipe"><i class="fa-solid fa-layer-group"></i> <span>Swipe</span></button>
          <button class="nav-btn" data-panel="matches"><i class="fa-solid fa-comments"></i> <span>Matches</span></button>
          <button class="nav-btn" data-panel="shortlist"><i class="fa-solid fa-list-check"></i> <span>Shortlist</span></button>
          <button class="nav-btn" data-panel="creators"><i class="fa-solid fa-fire"></i> <span>Creators</span></button>
          <button class="nav-btn" data-panel="premium"><i class="fa-solid fa-gem"></i> <span>Premium</span></button>
          <button class="nav-btn" data-panel="settings"><i class="fa-solid fa-gear"></i> <span>Settings</span></button>
          <button class="nav-btn logout-btn-mobile" id="btn-logout-mobile" title="Logout">
            <i class="fa-solid fa-right-from-bracket"></i> <span>Logout</span>
          </button>
        </nav>
      </div>
      <div class="sidebar-footer">
        <button id="btn-logout" class="nav-btn logout-btn"><i class="fa-solid fa-right-from-bracket"></i> <span>Logout</span></button>
      </div>
    </aside>

    <main class="main-feed animate-enter delay-2">
      
      <section class="panel is-active" data-panel="home" id="panel-home">
        <div class="home-top-bar glass-card">
          <div class="greeting-box">
            <h2 style="margin:0; font-size:1.4rem;">Hello, <span id="homeWelcomeName" style="color:#00aff0;">Member</span> üëã</h2>
            <p class="tiny muted" id="homePlanSummary" style="margin:0;">Loading status...</p>
          </div>
          <div class="notif-icon-box" id="btnNotifToggle">
             <i class="fa-solid fa-bell"></i>
             <span class="notif-dot" id="notifDot" style="display:none;"></span>
             <div class="notif-dropdown" id="notifDropdown">
                <div class="notif-header">Notifications</div>
                <div class="notif-list" id="notifList">
                    </div>
                <div class="notif-footer">Mark all read</div>
             </div>
          </div>
        </div>

        <h3 class="section-title">Who Liked You <span class="badge-pill" id="admirerCount">0 New</span></h3>
        <div class="admirer-list-container" id="admirerContainer"></div>

        <div style="margin-top: auto; border-top: 1px solid rgba(255,255,255,0.1); padding: 25px 30px 20px; margin-left: -30px; margin-right: -30px; background: transparent;">

</div>
      </section>

      <section class="panel" data-panel="swipe">
        <div class="feed-header">Discover</div>
        <div class="swipe-layout">
          <div class="swipe-empty" id="swipeEmpty" hidden>
            <div style="font-size:3rem;">‚ú®</div>
            <h3>That's everyone!</h3>
            <button class="btn btn--primary" id="btnRefreshSwipe">Refresh</button>
          </div>
          <div class="swipe-stack" id="swipeStack">
              </div>
          <div class="swipe-controls" id="swipeControls">
            <button id="btnSwipePass" class="btn-round btn-round--pass"><i class="fa-solid fa-xmark"></i></button>
            <button id="btnSwipeSuper" class="btn-round btn-round--super"><i class="fa-solid fa-star"></i></button>
            <button id="btnSwipeLike" class="btn-round btn-round--like"><i class="fa-solid fa-heart"></i></button>
          </div>
        </div>
      </section>

      <section class="panel" data-panel="matches">
        <div class="feed-header">Matches & Messages</div>
        <div style="padding: 10px 0;">
            <input type="text" class="tm-input" placeholder="Search matches..." style="background:rgba(255,255,255,0.05); border-radius:99px; padding-left:20px;">
        </div>
        <h3 class="section-title" style="margin-top:10px;">New Matches <span class="badge-pill bg-gold" id="newMatchCount">0</span></h3>
        <div class="stories-rail-container" style="margin-bottom: 20px;">
            <div class="stories-scroll left-align" id="newMatchesRail"></div>
        </div>
        <h3 class="section-title">Messages</h3>
        <div id="matchesContainer" class="matches-grid">
              </div>
      </section>

      <section class="panel" data-panel="shortlist" id="panel-shortlist">
          <div class="feed-header">Shortlist</div>
      </section>

      <section class="panel" data-panel="creators" id="panel-creators">
          <div class="feed-header">Creators</div>

          <!-- Creators application / access card (wired in dashboard.js) -->
          <div class="glass-card" id="creatorEntryCard" style="max-width:650px; margin: 20px auto 0; padding: 26px; text-align:center;">
            <div style="display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:8px;">
              <i class="fa-solid fa-fire" style="color:#00aff0;"></i>
              <h2 style="margin:0; font-size:1.35rem;">Become a Creator</h2>
            </div>
            <p class="tiny muted" style="margin:0 0 14px;">Apply to become a Creator and monetize your audience (OnlyFans-style).</p>

            <div id="creatorStatusRow" style="display:none; align-items:center; justify-content:center; gap:10px; margin: 0 0 14px;">
              <span class="badge-pill" id="creatorStatusChip">Pending</span>
              <span class="tiny muted" id="creatorStatusHint"></span>
            </div>

            <div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
              <button class="btn btn--white" id="btnOpenCreatorApply" style="border-radius:99px; padding: 10px 26px; font-weight:800;">Apply</button>
              <button class="btn btn--primary" id="btnGoCreatorsPage" style="display:none; border-radius:99px; padding: 10px 26px; font-weight:800;">Open Creators Page</button>
            </div>

            <div class="tiny muted" style="margin-top:12px;">Once approved by admin, this tab will automatically open the Creators page.</div>
          </div>
      </section>

      <section class="panel" data-panel="premium" id="panel-premium">
          <div class="feed-header">Premium Society</div>

          <!-- Premium Society application / access card (wired in dashboard.js) -->
          <div class="glass-card" id="premiumEntryCard" style="max-width:650px; margin: 20px auto 0; padding: 26px; text-align:center; border: 1px solid rgba(255, 215, 0, 0.25);">
            <div style="display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:8px;">
              <i class="fa-solid fa-crown" style="color:#ffd700;"></i>
              <h2 style="margin:0; font-size:1.35rem;">Premium Society</h2>
            </div>
            <p class="tiny muted" style="margin:0 0 14px;">Apply to become a Premium Society member. Your application will be reviewed by admin.</p>

            <div id="premiumStatusRow" style="display:none; align-items:center; justify-content:center; gap:10px; margin: 0 0 14px;">
              <span class="badge-pill" id="premiumStatusChip" style="border-color: rgba(255,215,0,0.35);">Pending</span>
              <span class="tiny muted" id="premiumStatusHint"></span>
            </div>

            <div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
              <button class="btn btn--gold" id="btnOpenPremiumApply" style="border-radius:99px; padding: 10px 26px; font-weight:800;">Apply</button>
              <button class="btn btn--primary" id="btnGoPremiumPage" style="display:none; border-radius:99px; padding: 10px 26px; font-weight:800;">Open Premium Society</button>
            </div>

            <div class="tiny muted" style="margin-top:12px;">Once approved by admin, this tab will automatically open Premium Society.</div>
          </div>
      </section>

      <section class="panel" data-panel="settings" id="panel-settings">
          <div class="feed-header">Settings</div>
          <div class="glass-card">
              <div class="settings-header">
                  <div class="settings-avatar"><img id="sAvatar" src="assets/images/truematch-mark.png" alt="Avatar"></div>
                  <div class="settings-text-col">
                      <h3 id="sNameDisplay">Member</h3>
                      <p id="sEmailDisplay" class="muted tiny">...</p>
                  </div>
                  <button id="btnEditProfile" class="btn btn--ghost btn--sm">Edit</button>
              </div>

              <div class="settings-group">
                  <h4>Profile Info</h4>
                  <div class="settings-list">
                      <div class="settings-item">
                          <span class="settings-label"><i class="fa-solid fa-location-dot"></i> City</span>
                          <span class="settings-value" id="dispCity">-</span>
                      </div>
                      <div class="settings-item">
                          <span class="settings-label"><i class="fa-solid fa-calendar"></i> Your Age</span>
                          <span class="settings-value" id="dispAge">-</span>
                      </div>
                  </div>
              </div>
              
              
              <div class="settings-group">
                  <h4>Preferences</h4>
                  <div class="settings-list">
                      <div class="settings-item">
                          <span class="settings-label"><i class="fa-solid fa-location-dot"></i> Preferred city</span>
                          <span class="settings-value" id="dispPrefCity">-</span>
                      </div>
                      <div class="settings-item">
                          <span class="settings-label"><i class="fa-solid fa-sliders"></i> Age range</span>
                          <span class="settings-value" id="dispAgeRange">-</span>
                      </div>
                      <div class="settings-item">
                          <span class="settings-label"><i class="fa-solid fa-globe"></i> Ethnicity</span>
                          <span class="settings-value" id="dispEthnicity">-</span>
                      </div>
                      <div class="settings-item">
                          <span class="settings-label"><i class="fa-solid fa-heart"></i> Looking for</span>
                          <span class="settings-value" id="dispLooking">-</span>
                      </div>
                      <div class="settings-item">
                          <span class="settings-label"><i class="fa-solid fa-bullseye"></i> Intent</span>
                          <span class="settings-value" id="dispIntent">-</span>
                      </div>
                      <div class="settings-item">
                          <span class="settings-label"><i class="fa-solid fa-people-group"></i> Shared values</span>
                          <span class="settings-value" id="dispSharedValues">-</span>
                      </div>
                      <div class="settings-item">
                          <span class="settings-label"><i class="fa-solid fa-ban"></i> Dealbreakers</span>
                          <span class="settings-value" id="dispDealbreakers">-</span>
                      </div>

                  </div>
              </div>

              <div class="settings-group">
                  <h4>Account</h4>

                  <div class="settings-list">
                      <div class="settings-item" style="cursor:pointer;" id="btnChangePassword">
                          <span class="settings-label"><i class="fa-solid fa-lock"></i> Password</span>
                          <span class="settings-value"><i class="fa-solid fa-chevron-right"></i></span>
                      </div>
                  </div>
              </div>
          </div>
      </section>
    </main>

    <aside class="right-sidebar animate-enter delay-3">
      <div class="search-box"><i class="fa-solid fa-magnifying-glass"></i> Search...</div>
      <div class="glass-card stats-widget">
        <div class="home-card-header"><h3 style="margin:0;">Swipes Left</h3></div>
        <div data-kpi="remaining" style="text-align:center; padding: 15px 0;">
          <div class="progress-ring"><svg width="100" height="100"><circle class="bg" cx="50" cy="50" r="40"></circle><circle class="fg" id="statsRingCircle" cx="50" cy="50" r="40" style="stroke-dasharray: 251; stroke-dashoffset: 0;"></circle></svg><div class="progress-text"><h2 id="statsCountDisplay" style="font-size:1.8rem; margin:0;">-</h2></div></div>
          <p class="tiny muted" style="margin-top:8px;">Resets Daily</p>
        </div>
      </div>
      <div class="glass-card">
        <div class="home-card-header" style="margin-bottom:15px; display:flex; justify-content:space-between; align-items:center;">
            <h3 style="margin:0; font-size:0.9rem;">Active Nearby</h3><span class="live-pulse">‚óè LIVE</span>
        </div>
        <div class="active-grid" id="activeNearbyContainer"></div>
      </div>
      <div class="premium-card">
        <div class="premium-content"><i class="fa-solid fa-crown" style="font-size:2rem; margin-bottom:10px;"></i><h3>Unlock More Features</h3><p>See who likes you & unlimited swipes.</p><button class="btn btn--white" id="btnSidebarSubscribe">Upgrade Now</button></div>
      </div>
    </aside>
  </div>
  
  <button id="mobileNavToggle" class="mobile-nav-toggle"><i class="fa-solid fa-bars"></i></button>

</div>

  <dialog id="dlgProfile" class="tm-dialog profile-dialog">
    <form id="frmProfile" method="dialog" class="modal-body">
      <div class="modal-head">
        <div>
          <div class="modal-title">Edit profile & preferences</div>
          <div class="modal-sub">These are the same fields you filled on Preferences. Saving here updates your database immediately.</div>
        </div>
        <button id="btnCloseProfile" class="btn btn--ghost btn--sm" type="button">Close</button>
      </div>

      <div class="modal-grid">
        <div class="modal-avatar">
          <button id="btnAvatarZoom" class="avatar-thumb" type="button" aria-label="View full size photo">
            <img id="dlgAvatarPreview" class="modal-avatar-img" src="assets/images/truematch-mark.png" alt="Profile photo preview" />
          </button>
          <div class="modal-avatar-actions">
            <input id="inpAvatarFile" type="file" accept="image/*" hidden />
            <button id="btnPickAvatar" type="button" class="btn btn--ghost btn--sm">Change photo</button>
            <div class="file-name" id="avatarFilename">No file chosen</div>
            <div class="hint">JPG/PNG. Auto-crop + compress.</div>
          </div>
        </div>

        <div class="modal-fields">
          <div class="field-row">
            <label class="field">
              <span>Your name</span>
              <input id="inpName" type="text" placeholder="Your name" />
            </label>

            <label class="field">
              <span>Email</span>
              <input id="inpEmail" type="email" readonly />
            </label>
          </div>

          <div class="field-row">
            <label class="field">
              <span>Your city</span>
              <input id="inpCity" type="text" placeholder="e.g., Makati" />
            </label>

            <label class="field">
              <span>Your age</span>
              <input id="inpAge" type="number" min="18" max="99" placeholder="e.g., 25" />
            </label>
          </div>

          <div class="divider"></div>

          <div class="field-row">
            <label class="field">
              <span>Preferred city</span>
              <input id="inpPrefCity" type="text" placeholder="e.g., Manila" />
            </label>

            <label class="field">
              <span>Looking for</span>
              <select id="inpLookingFor">
                <option value="women">Women</option>
                <option value="men">Men</option>
              </select>
            </label>
          </div>

          <div class="field-row">
            <label class="field">
              <span>Age range (min)</span>
              <input id="inpAgeMin" type="number" min="18" max="99" />
            </label>

            <label class="field">
              <span>Age range (max)</span>
              <input id="inpAgeMax" type="number" min="18" max="99" />
            </label>
          </div>

          <label class="field">
            <span>Ethnicity</span>
            <select id="inpEthnicity">
              <option value="">Any</option>
              <option value="african">African</option>
              <option value="asian">Asian</option>
              <option value="caucasian">Caucasian</option>
              <option value="hispanic">Hispanic/Latino</option>
              <option value="middle-eastern">Middle Eastern</option>
              <option value="mixed">Mixed</option>
              <option value="other">Other</option>
            </select>
          </label>

          <section id="advancedPrefsSection" class="advanced-section">
            <div id="advLockNote" class="adv-lock" hidden>
              <i class="fa-solid fa-lock"></i>
              <span>Advanced filters are VIP-only. Upgrade to unlock editing.</span>
            </div>

            <h4 class="adv-title">Advanced filters</h4>

            <div class="field-row">
              <label class="field">
                <span>Intent</span>
                <select id="inpIntent">
                  <option value="">Any</option>
                  <option value="serious">Serious relationship</option>
                  <option value="casual">Casual</option>
                  <option value="friends">Friends</option>
                  <option value="not-sure">Not sure yet</option>
                </select>
              </label>

              <div class="field">
                <span>Shared values</span>
                <div id="inpSharedValues" class="checks">
                  <label class="check"><input type="checkbox" name="sharedValues" value="family" /> Family</label>
                  <label class="check"><input type="checkbox" name="sharedValues" value="career" /> Career</label>
                  <label class="check"><input type="checkbox" name="sharedValues" value="faith" /> Faith</label>
                  <label class="check"><input type="checkbox" name="sharedValues" value="fitness" /> Fitness</label>
                  <label class="check"><input type="checkbox" name="sharedValues" value="travel" /> Travel</label>
                </div>
                <div class="checks-note">Pick what matters most to you.</div>
              </div>
            </div>

            <label class="field">
              <span>Dealbreakers</span>
              <textarea id="inpDealbreakers" placeholder="Example: smoking, long distance, etc."></textarea>
            </label>
          </section>

          <div class="modal-actions">
            <button id="btnSaveProfile" class="btn btn--primary" type="submit">Save changes</button>
          </div>
        </div>
      </div>
    </form>
  </dialog>


  <dialog id="dlgPassword" class="tm-dialog">
    <form id="frmPassword" class="tm-form">
      <div class="dialog__header"><h3>Change Password</h3></div>
      <div class="dialog__body">
        <label class="field">
          <span>Current password</span>
          <input id="inpCurrentPassword" type="password" class="tm-input" autocomplete="current-password" placeholder="Enter current password" />
        </label>

        <label class="field">
          <span>New password</span>
          <input id="inpNewPassword" type="password" class="tm-input" autocomplete="new-password" placeholder="Enter new password" />
        </label>

        <label class="field">
          <span>Confirm new password</span>
          <input id="inpConfirmPassword" type="password" class="tm-input" autocomplete="new-password" placeholder="Confirm new password" />
        </label>

        <div class="hint">Password must be at least 6 characters.</div>
      </div>
      <div class="dialog__footer">
        <button type="button" id="btnCancelPassword" class="btn btn--ghost">Cancel</button>
        <button type="submit" id="btnSubmitPassword" class="btn btn--primary">Update</button>
      </div>
    </form>
  </dialog>

<dialog id="dlgPremiumApply" class="tm-dialog premium-dialog">
    <div class="premium-header-bg"><i class="fa-solid fa-gem premium-icon-large" style="font-size:2rem; margin-bottom:5px; animation:float 3s infinite;"></i><h2>iTrueMatch <span style="color:#FFF;">GOLD</span></h2><p>Unlock the ultimate experience.</p></div>
    <div class="premium-benefits-list"><div class="p-benefit"><i class="fa-solid fa-check"></i> Unlimited Swipes</div><div class="p-benefit"><i class="fa-solid fa-check"></i> See Who Liked You</div><div class="p-benefit"><i class="fa-solid fa-check"></i> Priority Matching</div></div>
    <form method="dialog" id="frmPremiumApply" class="tm-form" style="padding: 0 20px 20px;"><div class="dialog__body" style="padding: 5px 0;"><label class="tiny muted" style="margin-top:10px;">APPLICATION FORM</label><input type="text" name="fullName" class="tm-input input-gold" placeholder="Full Name"><input type="number" name="age" class="tm-input input-gold" placeholder="Age" min="18" step="1"><input type="text" name="occupation" class="tm-input input-gold" placeholder="Occupation"><textarea name="finance" class="tm-input input-gold" placeholder="Annual Income Source" style="height:80px; resize:none;"></textarea></div><div class="dialog__footer" style="border:none; padding-top:10px;"><button type="button" id="btnPremiumCancel" class="btn btn--ghost">Cancel</button><button type="submit" class="btn btn--gold" style="flex:1;">Submit Application</button></div></form>
  </dialog>

  <dialog id="dlgCreatorApply" class="tm-dialog">
    <form method="dialog" id="frmCreatorApply" class="tm-form">
      <div class="dialog__header">
        <h3>Creator Application</h3>
      </div>

      <div class="dialog__body">
        <label class="tiny">PROFILE</label>

        <input type="text" name="creatorDisplayName" class="tm-input" placeholder="Display name (public)" required>

        <div style="display:flex; gap:12px; flex-wrap:wrap;">
          <input type="text" name="handle" class="tm-input" placeholder="@handle" style="flex:1; min-width: 170px;" required>

          <select name="gender" class="tm-input" style="flex:1; min-width: 170px;">
            <option value="" selected>Gender (optional)</option>
            <option value="woman">Woman</option>
            <option value="man">Man</option>
            <option value="non-binary">Non-binary</option>
            <option value="prefer_not_to_say">Prefer not to say</option>
          </select>
        </div>

        <div style="display:flex; gap:12px; flex-wrap:wrap;">
          <input type="text" name="creatorCountry" class="tm-input" placeholder="Country / Region" style="flex:1; min-width: 170px;" required>
          <input type="text" name="creatorLanguages" class="tm-input" placeholder="Languages (e.g., English, Spanish)" style="flex:1; min-width: 170px;" required>
        </div>

        <label class="tiny">ABOUT</label>
        <textarea name="creatorBio" class="tm-input" placeholder="Short bio. What can fans expect from you?" style="height: 90px; resize:none;" required></textarea>

        <div style="display:flex; gap:12px; flex-wrap:wrap;">
          <select name="creatorCategory" class="tm-input" style="flex:1; min-width: 170px;" required>
            <option value="" selected>Main category</option>
            <option value="lifestyle">Lifestyle</option>
            <option value="fitness">Fitness</option>
            <option value="fashion">Fashion</option>
            <option value="modeling">Modeling</option>
            <option value="cosplay">Cosplay</option>
            <option value="music">Music</option>
            <option value="gaming">Gaming</option>
            <option value="dance">Dance</option>
            <option value="education">Education</option>
            <option value="other">Other</option>
          </select>
          <input type="text" name="creatorNiche" class="tm-input" placeholder="Niche (optional)" style="flex:1; min-width: 170px;">
        </div>

        <textarea name="creatorPostingSchedule" class="tm-input" placeholder="Posting schedule (e.g., 4x/week, daily stories)" style="height: 70px; resize:none;" required></textarea>

        <label class="tiny">PRICING</label>
        <div class="hint">Set a monthly subscription price. You can change it later.</div>

        <div style="display:flex; gap:12px; flex-wrap:wrap;">
          <input type="number" name="price" class="tm-input" placeholder="Monthly price" min="1" step="1" style="flex:1; min-width: 170px;" required>
          <select name="creatorCurrency" class="tm-input" style="flex:1; min-width: 170px;">
            <option value="USD" selected>USD</option>
            <option value="EUR">EUR</option>
            <option value="GBP">GBP</option>
            <option value="PHP">PHP</option>
            <option value="NGN">NGN</option>
          </select>
        </div>

        <label class="tiny">CONTENT</label>
        <textarea name="creatorContentBoundaries" class="tm-input" placeholder="Content boundaries (optional). What you do / don‚Äôt do." style="height: 80px; resize:none;"></textarea>
        <textarea name="contentStyle" class="tm-input" placeholder="Content style (e.g., aesthetic, themes, vibe, formats)" style="height: 90px; resize:none;"></textarea>

        <label class="tiny">LINKS</label>
        <div class="hint">Optional, but helps reviewers verify your identity and brand.</div>

        <input type="url" name="creatorInstagram" class="tm-input" placeholder="Instagram link (optional)">
        <input type="url" name="creatorTikTok" class="tm-input" placeholder="TikTok link (optional)">
        <input type="url" name="creatorX" class="tm-input" placeholder="X / Twitter link (optional)">
        <input type="url" name="creatorWebsite" class="tm-input" placeholder="Website / Portfolio link (optional)">

        <label class="tiny">CONFIRMATION</label>
        <label style="display:flex; gap:10px; align-items:flex-start; font-size: 0.9rem; color: rgba(255,255,255,0.85); line-height:1.35;">
          <input type="checkbox" name="creatorConfirm18" required style="margin-top:4px;">
          <span>I confirm I meet the platform requirements and my application details are accurate.</span>
        </label>

        <input type="hidden" name="links" value="">
      </div>

      <div class="dialog__footer">
        <button type="button" id="btnCloseCreatorApply" class="btn btn--ghost">Cancel</button>
        <button type="submit" class="btn btn--primary">Submit</button>
      </div>
    </form>
  </dialog>

<dialog id="dlgChat" class="tm-dialog" style="max-width: 450px; height: 600px; padding:0; overflow:hidden;">
    <div style="display:flex; flex-direction:column; height:100%;">
        <div class="chat-header" style="padding:15px; background:rgba(255,255,255,0.05); border-bottom:1px solid rgba(255,255,255,0.1); display:flex; align-items:center; justify-content:space-between;">
            <div style="display:flex; align-items:center; gap:10px;">
                <img id="chatUserImg" src="" style="width:40px; height:40px; border-radius:50%; object-fit:cover;">
                <div>
                    <h4 id="chatUserName" style="margin:0;">User</h4>
                    <p style="margin:0; font-size:0.75rem; color:#00ff88;">‚óè Online</p>
                </div>
            </div>
            <button id="btnCloseChat" class="btn btn--sm btn--ghost" style="border:none; font-size:1.2rem;"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div id="chatBody" style="flex:1; padding:20px; overflow-y:auto; display:flex; flex-direction:column; gap:15px;"></div>
        <div style="padding:15px; background:rgba(0,0,0,0.5); border-top:1px solid rgba(255,255,255,0.1); display:flex; gap:10px;">
            <input type="text" class="tm-input" placeholder="Type a message..." style="border-radius:99px;">
            <button class="btn btn--primary" style="border-radius:50%; width:45px; padding:0;"><i class="fa-solid fa-paper-plane"></i></button>
        </div>
    </div>
  </dialog>

  <!-- Avatar full-size viewer (used inside Settings > Edit modal) -->
  <div id="avatarLightbox" class="avatar-lightbox" hidden>
    <button id="btnCloseAvatarLightbox" class="avatar-lightbox-close" type="button" aria-label="Close photo">
      <i class="fa-solid fa-xmark"></i>
    </button>
    <img id="avatarLightboxImg" src="" alt="Profile photo full view" />
  </div>

  <script>
    (() => {
      const canvas = document.getElementById('tm-bg-canvas');
      const ctx = canvas.getContext('2d');
      let W, H, pts = [];
      function resize() { W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; pts = []; for(let i=0; i<60; i++) pts.push({x:Math.random()*W, y:Math.random()*H, vx:(Math.random()-.5)*.5, vy:(Math.random()-.5)*.5}); }
      function loop() { ctx.clearRect(0,0,W,H); ctx.fillStyle = 'rgba(255,255,255,0.4)'; pts.forEach(p => { p.x += p.vx; p.y += p.vy; if(p.x<0 || p.x>W) p.vx*=-1; if(p.y<0 || p.y>H) p.vy*=-1; ctx.beginPath(); ctx.arc(p.x, p.y, 1.5, 0, Math.PI*2); ctx.fill(); }); requestAnimationFrame(loop); }
      window.addEventListener('resize', resize); resize(); loop();
    })();
  </script>
  
  <script src="dashboard.js" type="module"></script>

</body>
</html>