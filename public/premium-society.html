<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TrueMatch • Premium Society</title>

  <!-- Match your existing stack -->
  <link rel="stylesheet" href="fonts.css">
  <link rel="stylesheet" href="animations.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="responsive.css">
  <link rel="stylesheet" href="dashboard.css">

  <!-- Page-specific -->
  <link rel="stylesheet" href="premium-society.css">

  <script src="https://kit.fontawesome.com/5e3a761cdf.js" crossorigin="anonymous"></script>
</head>

<body class="tm-page">
  <!-- Background -->
  <canvas id="bg-network"></canvas>

  <header class="tm-topbar">
    <a class="tm-brand" href="dashboard.html" aria-label="Back to dashboard">
      <span class="tm-brand__mark">M</span>
      <span class="tm-brand__text">TRUEMATCH</span>
    </a>

    <div class="tm-topbar__actions">
      <a class="tm-link" href="dashboard.html">Dashboard</a>
      <button id="btnBack" class="btn btn--ghost" type="button">
        <i class="fa-solid fa-arrow-left"></i>
        Back
      </button>
    </div>
  </header>

  <main class="premium-shell">
    <section class="premium-hero">
      <div class="premium-hero__copy">
        <h1 class="premium-title">Premium Society</h1>
        <p class="premium-subtitle">
          Vetted membership for people who want higher-trust matches, concierge-level introductions, and a quieter network.
        </p>

        <div class="premium-pill-row">
          <span class="premium-pill" id="pillStatus">Checking status…</span>
          <span class="premium-pill premium-pill--muted" id="pillPlan">Plan: —</span>
        </div>
      </div>

      <div class="premium-hero__grid">
        <div class="premium-card">
          <div class="premium-card__icon"><i class="fa-solid fa-user-shield"></i></div>
          <div class="premium-card__title">Verified Network</div>
          <div class="premium-card__text">More signal, less noise. We prioritize quality and intent.</div>
        </div>
        <div class="premium-card">
          <div class="premium-card__icon"><i class="fa-solid fa-handshake-angle"></i></div>
          <div class="premium-card__title">Concierge Intros</div>
          <div class="premium-card__text">Curated introductions with higher compatibility screening.</div>
        </div>
        <div class="premium-card">
          <div class="premium-card__icon"><i class="fa-solid fa-calendar-check"></i></div>
          <div class="premium-card__title">Priority Scheduling</div>
          <div class="premium-card__text">Faster matchmaking iterations and better date coordination.</div>
        </div>
        <div class="premium-card">
          <div class="premium-card__icon"><i class="fa-solid fa-lock"></i></div>
          <div class="premium-card__title">Private Community</div>
          <div class="premium-card__text">Access to members-only rooms, drops, and events (as you build this out).</div>
        </div>
      </div>
    </section>

    <!-- Loading -->
    <section id="stateLoading" class="premium-state">
      <div class="premium-state__box">
        <div class="premium-state__title">Loading</div>
        <div class="premium-state__text">Fetching your Premium Society status…</div>
      </div>
    </section>

    <!-- Locked -->
    <section id="stateLocked" class="premium-state" hidden>
      <div class="premium-state__box">
        <div class="premium-state__title">Apply for access</div>
        <div class="premium-state__text">
          Premium Society is application-based. Submit your details and we’ll review your request.
        </div>

        <div class="premium-actions">
          <button id="btnApply" class="btn btn--primary" type="button">
            <i class="fa-solid fa-pen-to-square"></i>
            Apply now
          </button>

          <a class="btn btn--ghost" href="creators.html">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
            Go to Creator Space
          </a>
        </div>

        <div class="premium-note">
          Note: This uses your backend flow (<code>/api/me/premium/apply</code>).
        </div>
      </div>
    </section>

    <!-- Pending -->
    <section id="statePending" class="premium-state" hidden>
      <div class="premium-state__box">
        <div class="premium-state__title">Application submitted</div>
        <div class="premium-state__text">
          Your request is under review. You’ll get access once an admin approves your application.
        </div>

        <div class="premium-kv">
          <div><span class="muted">Status</span><br><strong id="pendingStatus">Pending</strong></div>
          <div><span class="muted">Submitted</span><br><strong id="pendingWhen">—</strong></div>
        </div>

        <div class="premium-actions">
          <button id="btnRefresh" class="btn btn--ghost" type="button">
            <i class="fa-solid fa-rotate"></i>
            Refresh status
          </button>
          <a class="btn btn--primary" href="dashboard.html">
            <i class="fa-solid fa-grid-2"></i>
            Back to Dashboard
          </a>
        </div>
      </div>
    </section>

    <!-- Approved -->
    <section id="stateApproved" class="premium-state" hidden>
      <div class="premium-state__box premium-state__box--wide">
        <div class="premium-state__title">Welcome to Premium Society</div>
        <div class="premium-state__text">
          You’re approved. This is your members-only lounge area (expand later with real features).
        </div>

        <div class="premium-lounge-grid">
          <div class="premium-panel">
            <div class="premium-panel__title">Concierge Requests</div>
            <div class="premium-panel__text">
              Tell the concierge what you want and we’ll curate intros (future: connect to your messaging system).
            </div>
            <textarea id="txtConcierge" class="premium-textarea" rows="5" placeholder="Example: I’m in Madrid this month. Looking for a serious relationship, 25–32, active lifestyle."></textarea>
            <div class="premium-actions premium-actions--right">
              <button id="btnSendConcierge" class="btn btn--primary" type="button">
                <i class="fa-solid fa-paper-plane"></i>
                Send request
              </button>
            </div>
            <div class="premium-hint">For now this button just stores the draft locally (no backend endpoint yet).</div>
          </div>

          <div class="premium-panel">
            <div class="premium-panel__title">Your Benefits</div>
            <ul class="premium-list">
              <li>Higher-trust matches and stronger filtering</li>
              <li>Concierge-level introductions (manual / curated)</li>
              <li>Priority date coordination (as you wire this to your scheduling)</li>
              <li>Access to members-only drops and events (when you add them)</li>
            </ul>

            <div class="premium-divider"></div>

            <div class="premium-actions">
              <a class="btn btn--ghost" href="creators.html">
                <i class="fa-solid fa-star"></i>
                Creator Space
              </a>
              <a class="btn btn--primary" href="dashboard.html">
                <i class="fa-solid fa-grid-2"></i>
                Dashboard
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Apply dialog -->
    <dialog id="dlgPremiumApply" class="tm-dialog">
      <form id="frmPremiumApply" class="tm-dialog__body" method="dialog">
        <div class="tm-dialog__head">
          <div>
            <div class="tm-dialog__title">Premium Society application</div>
            <div class="tm-dialog__subtitle">Submit accurate details so admins can review faster.</div>
          </div>
          <button id="btnDlgClose" class="tm-icon-btn" type="button" aria-label="Close">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <div class="tm-form-grid">
          <label class="tm-field">
            <span class="tm-field__label">Full name</span>
            <input id="fullName" name="fullName" class="tm-input" placeholder="e.g. Juan Dela Cruz" required />
          </label>

          <label class="tm-field">
            <span class="tm-field__label">Age</span>
            <input id="age" name="age" type="number" class="tm-input" min="18" max="99" placeholder="e.g. 28" required />
          </label>

          <label class="tm-field">
            <span class="tm-field__label">Occupation</span>
            <input id="occupation" name="occupation" class="tm-input" placeholder="e.g. Software Engineer" required />
          </label>

          <label class="tm-field">
            <span class="tm-field__label">Financial situation</span>
            <select id="finance" name="finance" class="tm-input" required>
              <option value="" selected disabled>Select one</option>
              <option value="stable">Stable income</option>
              <option value="high_income">High income</option>
              <option value="wealthy">Wealthy / HNW</option>
              <option value="other">Prefer not to say</option>
            </select>
          </label>
        </div>

        <div class="tm-dialog__foot">
          <button id="btnSubmitApply" class="btn btn--primary" type="submit">
            Submit application
          </button>
          <button id="btnCancelApply" class="btn btn--ghost" type="button">
            Cancel
          </button>
        </div>

        <div id="applyError" class="tm-error" hidden></div>
      </form>
    </dialog>
  </main>

  <script type="module" src="premium-society.js"></script>

  <!-- Animated background -->
  <script>
    const canvas = document.getElementById('bg-network');
    const ctx = canvas.getContext('2d');

    let w, h, particles = [];
    function resize() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    for (let i = 0; i < 80; i++) {
      particles.push({
        x: Math.random() * w,
        y: Math.random() * h,
        vx: (Math.random() - 0.5) * 0.6,
        vy: (Math.random() - 0.5) * 0.6
      });
    }

    function animate() {
      ctx.clearRect(0, 0, w, h);

      particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;

        if (p.x < 0 || p.x > w) p.vx *= -1;
        if (p.y < 0 || p.y > h) p.vy *= -1;

        ctx.beginPath();
        ctx.arc(p.x, p.y, 1.8, 0, Math.PI * 2);
        ctx.fillStyle = "#00c0ff";
        ctx.fill();
      });

      for (let i = 0; i < particles.length; i++) {
        for (let j = i + 1; j < particles.length; j++) {
          const dx = particles[i].x - particles[j].x;
          const dy = particles[i].y - particles[j].y;
          const dist = Math.sqrt(dx * dx + dy * dy);

          if (dist < 120) {
            ctx.beginPath();
            ctx.moveTo(particles[i].x, particles[i].y);
            ctx.lineTo(particles[j].x, particles[j].y);
            ctx.strokeStyle = `rgba(0, 192, 255, ${1 - dist / 120})`;
            ctx.lineWidth = 0.4;
            ctx.stroke();
          }
        }
      }
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>
