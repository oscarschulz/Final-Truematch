/* ============================
   PREFERENCES STYLES (CLEAN v6)
   Includes: profile age/city + required profile picture upload + compact layout
   Fix: timeline circle icons centered
   ============================ */

@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap');

/* --- 1) GLOBAL --- */
body { overflow: hidden !important; }

.unified-card::after { display: none !important; }

.pref-card-override{
  display:flex;
  overflow:hidden;
  animation: cardEntrance 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) both;
  transform: scale(0.95);
  /* FIX: Pinipigilan ang card na lumagpas sa height ng laptop screen */
  height: 80vh !important;
  min-height: 600px;
  max-height: 750px;
}
@keyframes cardEntrance { to { opacity: 1; transform: scale(1); } }

/* --- 2) TOP NAV --- */
.nav-actions{
  display:flex;
  align-items:center;
  gap:15px;
  pointer-events:auto;
}


.nav-logout-link{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:10px 20px;
  border-radius:50px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.15);
  color:#fff;
  text-decoration:none;
  font-size:0.8rem;
  font-weight:700;
  letter-spacing:1px;
  white-space:nowrap;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  pointer-events:auto;
}
.nav-logout-link:hover{
  background: rgba(100,233,238,0.1);
  border-color:#64E9EE;
  color:#64E9EE;
  box-shadow: 0 0 20px rgba(100,233,238,0.2);
  transform: translateY(-2px);
}
.nav-login-link{
  color:#94a3b8;
  text-decoration:none;
  font-weight:700;
  font-size:0.8rem;
  text-transform:uppercase;
  letter-spacing:1px;
  transition:all 0.3s;
  padding:8px 12px;
  border-radius:8px;
}
.nav-login-link:hover{
  color:#fff;
  background: rgba(255,255,255,0.05);
  text-shadow: 0 0 10px rgba(255,255,255,0.5);
}

.nav-back-btn{
  display:flex; align-items:center; gap:6px;
  padding:10px 20px;
  border-radius:50px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.15);
  color:#fff;
  text-decoration:none;
  font-size:0.8rem;
  font-weight:700;
  letter-spacing:1px;
  white-space:nowrap;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  pointer-events:auto;
}
.nav-back-btn:hover{
  background: rgba(100,233,238,0.1);
  border-color:#64E9EE;
  color:#64E9EE;
  box-shadow: 0 0 20px rgba(100,233,238,0.2);
  transform: translateY(-2px);
}

.nav-brand { text-transform:none !important; }

/* --- 3) LEFT TIMELINE --- */
.pref-visual-side{
  width:35% !important;
  background: rgba(0,0,0,0.2);
  border-right:none !important;
  display:flex;
  flex-direction:column;
  justify-content:center; /* FIX: Pinitna natin vertically */
  align-items:flex-start;
  padding: 40px 40px 40px 60px; /* FIX: Binigyan ng space sa taas at ibaba */
  animation: slideInLeft 0.8s ease-out 0.2s both;
}
@keyframes slideInLeft{
  from { transform: translateX(-20px); }
  to { opacity: 1; transform: translateX(0); }
}

.timeline-wrapper{ text-align:left; position:relative; width:100%; }
.timeline-title{
  font-size:2rem;
  font-weight:900;
  color:#fff;
  margin-bottom:40px;
  text-transform:uppercase;
  letter-spacing:-1px;
  text-shadow: 0 0 20px rgba(100,233,238,0.4);
  padding-left:5px;
}

.timeline-track{
  display:flex;
  flex-direction:column;
  gap:40px;
  position:relative;
}
.track-line{
  position:absolute;
  left:19px;
  top:10px;
  bottom:10px;
  width:2px;
  background: rgba(255,255,255,0.1);
  z-index:0;
}

.timeline-node{
  display:flex;
  align-items:center;
  gap:20px;
  position:relative;
  z-index:1;
  opacity:0.4;
  transition:0.3s;
}
.timeline-node.active{ opacity:1; transform: translateX(5px); }
.timeline-node.done{ opacity:0.7; }

/* FIX: perfect centering inside the circle */
.node-circle{
  width:40px;
  height:40px;
  border-radius:50%;
  background:#0b1120;
  border: 1px solid rgba(255,255,255,0.2);
  display:grid;
  place-items:center;
  font-weight:900;
  color:#fff;
  flex-shrink:0;
  position:relative;
}
.node-icon{
  display:block;
  line-height:1;
  transform: translateY(-0.5px);
}

.timeline-node.active .node-circle{
  background:#64E9EE;
  border-color:#64E9EE;
  color:#000;
  animation: radarPulse 2s infinite;
}
@keyframes radarPulse{
  0%   { box-shadow: 0 0 0 0 rgba(100,233,238,0.7); }
  70%  { box-shadow: 0 0 0 15px rgba(100,233,238,0); }
  100% { box-shadow: 0 0 0 0 rgba(100,233,238,0); }
}

.timeline-node.done .node-circle{
  background: rgba(100,233,238,0.2);
  border-color:#64E9EE;
  color:#64E9EE;
}

.node-text h3{ margin:0; font-size:1.1rem; font-weight:700; color:#fff; }
.node-text p{ margin:4px 0 0; font-size:0.85rem; color:#94a3b8; }

/* --- 4) RIGHT FORM AREA --- */
.pref-form-side { 
  width: 65% !important; 
  /* FIX: Nilagyan natin ng spacing ang wrapper (Top: 30px, Right: 15px, Bottom: 30px, Left: 0) */
  /* Para mapilitang pumasok sa loob ang scrollbar at hindi sumagad sa border ng card! */
  padding: 30px 15px 30px 0 !important; 
  position: relative; 
}

.form-scroll-container {
  width: 100%;
  height: 100%;
  overflow-y: auto;
  /* FIX: Tinanggal ang top/bottom padding dito dahil nailipat na sa parent */
  padding: 0 41px; 
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  scrollbar-width: thin;
  scrollbar-color: rgba(100, 233, 238, 0.25) transparent;
}

/* Subtle Scrollbar para sa Chrome, Safari, at Edge */
.form-scroll-container::-webkit-scrollbar { 
  width: 6px; 
}
.form-scroll-container::-webkit-scrollbar-track { 
  background: transparent; 
  margin: 0; /* Tinanggal na ang margin dahil safe na siya sa loob ng parent padding */
}
.form-scroll-container::-webkit-scrollbar-thumb { 
  background: rgba(100, 233, 238, 0.25); 
  border-radius: 10px; 
}
.form-scroll-container::-webkit-scrollbar-thumb:hover { 
  background: rgba(100, 233, 238, 0.5); 
}

@keyframes fadeInUp{
  from { transform: translateY(15px); }
  to   { opacity: 1; transform: translateY(0); }
}
.stagger-0{ animation: fadeInUp 0.5s ease-out 0.45s both !important; }
.stagger-1{ animation: fadeInUp 0.5s ease-out 0.55s both !important; }
.stagger-2{ animation: fadeInUp 0.5s ease-out 0.65s both !important; }
.stagger-3{ animation: fadeInUp 0.5s ease-out 0.75s both !important; }

/* --- 5) INPUTS --- */
.pref-group, .input-group{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-bottom:18px;
  position:relative;
}

.static-label{
  display:block;
  font-size:0.7rem;
  font-weight:700;
  color:#64E9EE;
  text-transform:uppercase;
  letter-spacing:1px;
  pointer-events:none;
}

.input-row{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:25px;
  width:100%;
  margin-bottom:18px;
}

.text-input{
  width:100%;
  padding:12px;
  background: rgba(0,0,0,0.4);
  border: 1px solid rgba(100,233,238,0.2);
  border-radius:12px;
  color:#fff;
  font-family:'Montserrat', sans-serif;
  font-size:0.95rem;
  outline:none;
}
.text-input:focus{
  border-color:#64E9EE;
  background: rgba(100,233,238,0.05);
}

/* Age capsule */
.age-range-capsule{
  display:flex;
  align-items:center;
  background: rgba(0,0,0,0.4);
  border: 1px solid rgba(100,233,238,0.2);
  border-radius:12px;
  padding: 0 10px;
  height:48px;
}
.age-range-capsule input{
  border:none !important;
  background:transparent !important;
  box-shadow:none !important;
  padding:0 !important;
  text-align:center;
  width:45%;
  color:#fff;
  font-size:0.95rem;
  font-weight:600;
}
.age-range-capsule input:focus{ outline:none; }
.age-range-capsule .sep{ color:#64748b; font-weight:300; }

/* Select */
.select-wrapper{ position:relative; width:100%; }
.select-wrapper select{
  width:100%;
  padding:12px;
  background: rgba(0,0,0,0.4);
  border: 1px solid rgba(100,233,238,0.2);
  border-radius:12px;
  color:#fff;
  font-family:'Montserrat', sans-serif;
  appearance:none;
  cursor:pointer;
  font-size:0.95rem;
}
.select-wrapper::after{
  content:'â–¼';
  position:absolute;
  right:15px;
  top:50%;
  transform: translateY(-50%);
  color:#64E9EE;
  font-size:0.7rem;
  pointer-events:none;
}
select:focus{
  border-color:#64E9EE;
  outline:none;
  background: rgba(100,233,238,0.05);
}
select option{ background:#02040a; color:#fff; padding:10px; }

/* Radio cards */
.radio-cards{ display:flex; gap:12px; width:100%; }
.radio-card{ flex:1; cursor:pointer; position:relative; margin:0; -webkit-tap-highlight-color:transparent; transform: translateZ(0); }
.radio-card input{ display:none; }
.radio-card .card-content{
  display:block;
  text-align:center;
  padding:12px 5px;
  background: rgba(0,0,0,0.4);
  border: 1px solid rgba(100,233,238,0.2);
  border-radius:12px;
  color:#94a3b8;
  font-weight:700;
  font-size:0.85rem;
  user-select:none;
}
.radio-card input:checked + .card-content{
  background: rgba(100,233,238,0.15);
  border-color:#64E9EE;
  color:#64E9EE;
  box-shadow: 0 0 15px rgba(100,233,238,0.2);
}

/* --- 6) YOUR PROFILE BLOCK --- */
.profile-section{ margin-bottom:14px; }
.profile-section .section-label{ margin: 0 0 10px; }

/* Profile picture (premium + aligned right content) */
.avatar-upload{ margin-top:10px; }

.avatar-row{
  display:grid;
  grid-template-columns: 72px 1fr;
  gap:18px;
  align-items:center;
}

.avatar-preview{
  width:72px;
  height:72px;
  border-radius:18px;
  border: 1px solid rgba(100,233,238,0.30);
  background:
    radial-gradient(120px 120px at 20% 20%, rgba(100,233,238,0.10), transparent 55%),
    rgba(0,0,0,0.28);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.04),
    0 14px 35px rgba(0,0,0,0.35);
  cursor:pointer;
  overflow:hidden;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}
.avatar-preview:hover{
  border-color: rgba(100,233,238,0.50);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.05),
    0 18px 45px rgba(0,0,0,0.40);
}

#avatarPreviewImg{
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:18px;
  display:block;
}
#avatarPreviewImg:not([src]),
#avatarPreviewImg[src=""]{
  display:none;
}
#avatarPreviewImg[src]:not([src=""]) + #avatarPlaceholder{
  display:none;
}

.avatar-placeholder{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:6px;
  font-weight:800;
  font-size:0.68rem;
  letter-spacing:1px;
  text-transform:uppercase;
  color: rgba(210,245,249,0.68);
}
.avatar-placeholder::before{
  content:"+";
  font-size:1.7rem;
  line-height:1;
  color:#64E9EE;
  text-shadow: 0 0 18px rgba(100,233,238,0.25);
}

#avatarFile{ display:none; }

.avatar-actions{
  display:grid;
  grid-template-columns: auto 1fr;
  grid-template-rows: auto auto;
  gap: 6px 14px;
  align-items:center;
  min-width:0;
  padding-left:12px;
}

#avatarBtn{
  grid-column:1;
  grid-row:1;
  height:38px;
  display:inline-flex;
  align-items:center;
  border-radius:12px;
  padding: 10px 14px;
  line-height:1;
  white-space:nowrap;
}

#avatarFileName{
  grid-column:2;
  grid-row:1;
  margin:0;
  font-size:0.82rem;
  color: rgba(210,245,249,0.72);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  min-width:0;
}

.avatar-actions .hint{
  grid-column: 1 / -1;
  margin:0;
  font-size:0.74rem;
  color: rgba(148,163,184,0.78);
}

/* Button (compact but readable) */
.btn-primary{
  padding: 14px 18px !important;
  font-size: 0.95rem !important;
}

/* --- 7) LOADER --- */
.loader-overlay{
  position:fixed;
  inset:0;
  z-index:999;
  background: rgba(0,0,0,0.9);
  backdrop-filter: blur(5px);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:15px;
}
.loader-overlay.hidden{ display:none; }
.loader-spinner{
  width:50px;
  height:50px;
  border:3px solid rgba(100,233,238,0.2);
  border-top-color:#64E9EE;
  border-radius:50%;
  animation: spin 0.8s linear infinite;
}
@keyframes spin{ to { transform: rotate(360deg); } }

/* --- LAPTOP VIEW FIX (Para hindi mag-wrap ang "Set your preferences") --- */
@media screen and (max-width: 1366px) {
  .pref-form-side .auth-header h1 {
    font-size: 1.7rem;
    white-space: nowrap;
  }
}

/* --- SHORT LAPTOP SCREENS (1160x600) FIX --- */
/* Naka-lock lang ito sa mga screens na mas malapad sa tablet (min-width: 1025px) at mababa ang height */
@media screen and (max-height: 680px) and (min-width: 1025px) {
  
  .pref-card-override {
    max-width: 820px !important; 
    min-height: 420px !important; 
    height: 76vh !important; 
  }
  
  .pref-visual-side {
    padding: 20px 15px 20px 30px !important; 
  }
  .timeline-title {
    font-size: 1.15rem !important; 
    margin-bottom: 15px !important;
  }
  .node-text h3 { font-size: 0.85rem !important; }
  .node-text p { font-size: 0.7rem !important; }
  .timeline-track { gap: 15px !important; }
  .node-circle { width: 28px !important; height: 28px !important; font-size: 0.75rem !important; }
  
  .pref-form-side {
    padding: 15px 5px 15px 0 !important;
  }
  .form-scroll-container {
    padding: 0 20px !important;
  }
  .pref-form-side .auth-header h1 {
    font-size: 1.15rem !important; 
  }
  .pref-form-side .auth-header p {
    font-size: 0.7rem !important; 
    margin-bottom: 8px !important;
  }
  .static-label {
    font-size: 0.6rem !important; 
  }
  .input-row {
    gap: 10px !important;
    margin-bottom: 10px !important;
  }
  .pref-group { margin-bottom: 10px !important; }

  .text-input, .select-wrapper select, .age-range-capsule {
    padding: 6px 10px !important;
    height: 38px !important; 
    font-size: 0.75rem !important; 
  }
  .age-range-capsule input { font-size: 0.75rem !important; }
  .radio-card .card-content {
    padding: 6px 5px !important;
    font-size: 0.7rem !important; 
  }
  .btn-primary {
    padding: 10px 15px !important;
    font-size: 0.8rem !important; 
    margin-top: 5px !important;
  }
  
  .avatar-preview { width: 48px !important; height: 48px !important; border-radius: 12px !important; }
  .avatar-placeholder::before { font-size: 1rem !important; }
  .avatar-placeholder { font-size: 0.55rem !important; }
  #avatarBtn { height: 28px !important; padding: 4px 10px !important; font-size: 0.7rem !important; border-radius: 8px !important; }
  #avatarFileName { font-size: 0.7rem !important; }
  .avatar-actions .hint { font-size: 0.6rem !important; }
}

/* --- 8) TABLET & IPAD VIEW (Max Width: 1024px) --- */
@media (max-width: 1024px) {
  /* HINDI GINALAW ANG HEIGHT - Naka-fix kung ano yung sakto sayo */
  .pref-card-override { 
    flex-direction: column !important; 
    height: 92vh !important; 
    min-height: 1100px !important; 
    max-width: 850px !important; 
    width: 95% !important;
    overflow: hidden !important;
    margin: auto !important;
    border-radius: 40px !important; 
  }
  
  .pref-visual-side { display: none !important; }
  
  .pref-form-side { 
    width: 100% !important; 
    height: 100% !important; 
    display: flex !important;
    flex-direction: column !important;
    padding: 0 !important; 
  }
  
  .form-scroll-container { 
    /* FIX: Tinanggal ang sobrang laking 120px padding! Ginawang 40px na lang */
    padding: 40px 60px !important; 
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important; /* FIX: Kusang papagitna ang form para malinis */
    overflow-y: hidden !important; /* FIX: Pinatay natin ang scroll dahil kasya na lahat */
  }

  /* Tinago ang scrollbar dahil hindi na kailangan */
  .form-scroll-container::-webkit-scrollbar { display: none; }

  /* FIX: Binawasan ang margin ng header para hindi tumulak pababa */
  .pref-form-side .auth-header { margin-bottom: 30px !important; margin-top: 0 !important; }
  .pref-form-side .auth-header h1 { 
    white-space: normal !important; 
    font-size: 3rem !important; 
    line-height: 1.1 !important;
    letter-spacing: -1px;
  }
  .pref-form-side .auth-header p { font-size: 1.1rem !important; }
  
  .input-row { grid-template-columns: 1fr 1fr !important; gap: 30px !important; margin-bottom: 20px !important; }
  .static-label { font-size: 0.85rem !important; margin-bottom: 10px !important; }
  .text-input, .select-wrapper select, .age-range-capsule { height: 55px !important; font-size: 1.1rem !important; }
}
/* ==========================================================
   9) MOBILE SPECIFIC FIXES FOR PREFERENCES (MAX-WIDTH: 600px)
   ========================================================== */
@media screen and (max-width: 600px) {
  
  html, body.tm-dark {
    overflow: hidden !important;
    height: 100% !important;
    position: fixed !important; /* Para hindi gumagalaw ang background */
    width: 100% !important;
  }

  /* SPLIT LAYOUT: Inilayo sa navbar para hindi mag-overlap */
  .split-layout {
    box-sizing: border-box !important;
    height: 100dvh !important;
    min-height: 100dvh !important;
    padding: 70px 15px 10px !important; /* Space para sa header */
    display: flex !important;
    align-items: flex-start !important; /* Sa taas mag-uumpisa */
    justify-content: center !important;
    overflow: hidden !important;
  }

  /* PINAKAMALIIT NA FORM HEIGHT - FIX PARA SA 430x932 */
  .unified-card.pref-card-override {
    box-sizing: border-box !important;
    background: rgba(13, 20, 35, 0.95) !important;
    border: 1px solid rgba(100, 233, 238, 0.3) !important;
    border-radius: 20px !important;
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    
    /* KILLER FIX: Patay ang 1100px min-height dito */
    min-height: 0 !important; 
    height: calc(100dvh - 100px) !important; /* Auto-adjust sa screen height */
    max-height: 750px !important; 
    
    padding: 0 !important;
    margin: 0 auto !important; 
    overflow: hidden !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5) !important;
  }

  .pref-visual-side { display: none !important; }

  .pref-form-side {
    width: 100% !important;
    height: 100% !important;
    padding: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
  }

  /* SCROLLBAR FIX: Dito lang dapat ang scroll */
  .form-scroll-container {
    box-sizing: border-box !important;
    padding: 20px 20px 30px 20px !important; 
    overflow-y: auto !important; 
    overflow-x: hidden !important;
    flex: 1 !important; /* Sasakop sa natitirang space */
    display: block !important; 
    -webkit-overflow-scrolling: touch !important;
  }

  /* CUSTOM SCROLLBAR: Para hindi makapal sa maliit na screen */
  .form-scroll-container::-webkit-scrollbar { width: 4px !important; }
  .form-scroll-container::-webkit-scrollbar-thumb { 
    background: rgba(100, 233, 238, 0.3) !important; 
    border-radius: 10px !important; 
  }

  /* AUTH HEADER: Compact version */
  body.tm-dark .split-layout .unified-card .pref-form-side .auth-header { 
    padding: 20px 20px 5px 20px !important;
    margin: 0 !important;
  }
  body.tm-dark .split-layout .unified-card .pref-form-side .auth-header h1 { 
    font-size: 1.3rem !important; 
    margin: 0 !important;
  }
  body.tm-dark .split-layout .unified-card .pref-form-side .auth-header p { 
    font-size: 0.8rem !important; 
    margin-bottom: 0 !important;
  }

  /* COMPACT ELEMENTS */
  .avatar-row { 
    display: flex !important; 
    align-items: center !important; 
    gap: 15px !important; 
    margin-bottom: 15px !important; 
  }
  .avatar-preview { width: 60px !important; height: 60px !important; }
  
  .input-row { 
    display: flex !important; 
    flex-direction: column !important; 
    gap: 10px !important; 
    margin-bottom: 10px !important; 
  }
  
  .pref-group { margin-bottom: 10px !important; }
  
  .text-input, .select-wrapper select, .age-range-capsule { 
    height: 40px !important; 
    font-size: 0.85rem !important; 
  }

  .btn-primary { 
    margin: 15px 0 !important; 
    padding: 12px !important; 
    font-size: 0.9rem !important;
    position: relative !important;
    bottom: 0 !important;
  }
}