/* assets/css/premium-society/global.css */

/* =========================================
   1. CORE VARIABLES & THEME
   ========================================= */
:root {
  --ps-bg-dark: #000000;
  --ps-glass-bg: rgba(20, 20, 25, 0.6); 
  --ps-sidebar-bg: rgba(5, 10, 20, 0.85);      
  --ps-border-color: rgba(255, 255, 255, 0.12); 
  --ps-brand-color: #00aff0; 
  --ps-brand-grad: linear-gradient(135deg, #00aff0, #0072ff);
  --ps-text-main: #e7e9ea;
  --ps-text-muted: #8899a6;
  
  /* DEFAULT WIDTHS (For Desktop > 1440px) */
  --ps-sidebar-left-width: 260px;
  --ps-sidebar-right-width: 320px;
}

*, *::before, *::after { box-sizing: border-box; }

body.ps-theme {
    margin: 0; padding: 0; 
    width: 100%; min-height: 100vh;
    overflow-x: hidden; overflow-y: auto;
    color: var(--ps-text-main); font-family: system-ui, -apple-system, sans-serif;
    background: var(--ps-bg-dark);

    /* --- FIX FOR SWIPE BACK --- */
    overscroll-behavior-x: none;      /* Pigilan ang bounce effect */
    touch-action: pan-y pinch-zoom;   /* Vertical scroll lang ang allowed sa browser, Horizontal ay sa JS na */
}

/* BACKGROUND CANVAS */
#ps-bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; background: radial-gradient(circle at 50% 10%, #1a1a2e 0%, #000 80%); }

/* --- FIX FOR OVERLAYS (Critical for Swipe Back) --- */
.ps-chat-window, 
.ps-match-overlay, 
.ps-story-viewer,
.ps-edit-modal-overlay,
.ps-layout,
.ps-main-feed {
    touch-action: pan-y pinch-zoom; 
}

/* =========================================
   2. LOADER & ANIMATIONS
   ========================================= */
#app-loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.5s ease-out; }
.loader-logo { width: 80px; height: 80px; border-radius: 50%; animation: pulseLogo 2s infinite; }
.loader-text { margin-top: 15px; font-weight: 700; letter-spacing: 1px; font-size: 1.2rem; color: #fff; }

@keyframes pulseLogo { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 175, 240, 0.7); } 70% { transform: scale(1.1); box-shadow: 0 0 0 20px rgba(0, 175, 240, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 175, 240, 0); } }
@keyframes psFadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

/* =========================================
   3. COMMON UTILITIES
   ========================================= */
.ps-glass-card { background: var(--ps-glass-bg); border: 1px solid var(--ps-border-color); border-radius: 16px; padding: 20px; margin-bottom: 15px; backdrop-filter: blur(10px); }
.ps-btn-icon-sm { background: rgba(255,255,255,0.1); border: none; width: 30px; height: 30px; border-radius: 50%; color: #fff; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
.ps-btn-icon-sm:hover { background: rgba(255,255,255,0.2); }
.ps-section-title { font-size: 1.1rem; font-weight: 800; margin-bottom: 15px; color: #fff; display: flex; align-items: center; justify-content: space-between; }
.ps-badge { background: #ff3366; color: #fff; font-size: 0.7rem; padding: 3px 8px; border-radius: 6px; font-weight: 700; }
.ps-badge.ps-bg-gold { background: #FFD700; color: #000; }
.ps-text-gradient { background: linear-gradient(to right, #00aff0, #00ff88); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

/* TOAST */
.ps-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: rgba(20,20,30,0.95); color: #fff; padding: 12px 24px; border-radius: 99px; border: 1px solid var(--ps-brand-color); box-shadow: 0 10px 30px rgba(0,0,0,0.5); opacity: 0; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 10000; font-weight: 600; font-size: 0.9rem; pointer-events: none; white-space: nowrap; }
.ps-toast.active { opacity: 1; transform: translateX(-50%) translateY(0); }

/* MOBILE ELEMENTS (Default Hidden on Desktop) */
.ps-mobile-toggle, .ps-mobile-moments-toggle { display: none; }
.ps-mobile-only-btn, .ps-mobile-swipes-badge { display: none !important; }


/* =========================================================================
   4. RESPONSIVE BREAKPOINTS (FINAL 1024px LOGIC)
   ========================================================================= */

/* --- A. LARGE LAPTOPS (Max 1440px) --- */
@media (max-width: 1440px) {
    :root {
        --ps-sidebar-left-width: 240px;
        --ps-sidebar-right-width: 280px;
    }
}

/* --- B. TABLET & MOBILE (Max 1024px) --- 
   Current Goal: Hide Right Sidebar & Show Mobile Elements */
@media (max-width: 1024px) {
    
    /* 1. HIDE RIGHT SIDEBAR COMPLETELY */
    .ps-right-sidebar {
        display: none !important;
    }

    /* 2. LAYOUT: Keep Left Sidebar + Main Feed (2 Columns) */
    .ps-layout {
        grid-template-columns: 240px 1fr !important;
    }
    
    /* 3. SHOW NEW MOBILE ELEMENTS */
    .ps-mobile-only-btn {
        display: flex !important;
    }

    /* Position Active Dropdown */
    #psMobileActiveDropdown {
        top: 60px; 
    }

    /* 4. SWIPE TAB ADJUSTMENTS */
    .ps-mobile-swipes-badge {
        display: flex !important;
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(20, 20, 30, 0.8);
        border: 1px solid rgba(255, 215, 0, 0.3);
        padding: 8px 16px;
        border-radius: 99px;
        color: #fff;
        font-weight: 700;
        font-size: 0.9rem;
        align-items: center;
        gap: 8px;
        backdrop-filter: blur(10px);
        z-index: 50;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    }
    .ps-swipe-layout {
        justify-content: center;
    }
    .ps-swipe-stack {
        margin: 0 auto 20px; 
    }
}


/* --- C. MOBILE PHONES (Max 768px) --- 
   Convert Left Sidebar to Hamburger Drawer */
@media (max-width: 768px) {
    
    /* Layout becomes Block (1 Column) */
    .ps-layout {
        display: block; 
        height: 100vh;
        overflow: hidden;
    }

    /* Main Feed Full Width */
    .ps-main-feed {
        width: 100%;
        height: 100vh;
        border-right: none;
        padding-bottom: 0; /* Remove bottom padding conflict */
    }

    /* LEFT SIDEBAR: Drawer Mode */
    .ps-sidebar {
        position: fixed; top: 0; left: 0; bottom: 0;
        height: 100%; width: 280px;
        background: rgba(10, 15, 25, 0.98);
        backdrop-filter: blur(20px);
        z-index: 6000;
        border-right: 1px solid rgba(255,255,255,0.1);
        box-shadow: 10px 0 40px rgba(0,0,0,0.5);
        transform: translateX(-100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        padding-top: 60px; /* Space para sa close button kung gusto mo, or branding */
    }
    .ps-sidebar.ps-is-open { transform: translateX(0); }

    /* --- UPDATED HAMBURGER MENU (Top Left) --- */
    .ps-mobile-toggle { 
        display: flex; 
        position: fixed; 
        top: 15px;       /* Nasa taas na */
        left: 15px;      /* Nasa kaliwa */
        width: 45px; height: 45px; 
        border-radius: 12px; /* Soft square looks better in header */
        background: rgba(20, 20, 25, 0.6); /* Glass effect */
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.1); 
        color: #fff;
        z-index: 5000; 
        align-items: center; justify-content: center; 
        font-size: 1.1rem; cursor: pointer; 
        box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
    }
    
    /* HIDE BUTTON KAPAG BUKAS ANG CHAT, CREATORS, O MATCHES LIST (Controlled by JS Classes) */
    body.ps-chat-open .ps-mobile-toggle,
    body.ps-creator-open .ps-mobile-toggle,
    body.ps-tab-matches .ps-mobile-toggle,  /* NEW: Hide on Matches Tab */
    body.ps-tab-creators .ps-mobile-toggle  /* NEW: Hide on Creators Tab */
    {
        display: none !important;
    }

    /* Adjust Padding ng Panels para di matakpan ng Header/Toggle */
    .ps-panel { padding: 70px 15px 100px; } 

    /* Creators Grid */
    .ps-creators-grid { grid-template-columns: repeat(2, 1fr) !important; padding: 0 10px 100px; }
    
    /* Swipe Stack */
    .ps-swipe-stack { width: 95%; height: 55vh; margin-top: 20px; }
    
    /* Profile Header Adjustment */
    .ps-profile-header { 
        padding: 15px; 
        padding-left: 60px; /* Space para sa Hamburger button */
        flex-direction: row; 
    }
    
    /* Gift & Settings Grid */
    .ps-gift-grid { grid-template-columns: repeat(2, 1fr) !important; }
    .ps-settings-dashboard { grid-template-columns: 1fr !important; padding: 70px 15px 100px; }
    
    /* Mobile Badge Position */
    .ps-mobile-swipes-badge {
        top: 75px; /* Ibaba konti dahil nasa taas na ang header area */
        right: 15px;
        font-size: 0.8rem;
        padding: 6px 12px;
    }
}

/* --- D. SMALL MOBILE (Max 430px) --- */
@media (max-width: 430px) {
    .ps-swipe-controls { gap: 15px; }
    .ps-btn-round { width: 60px; height: 60px; font-size: 22px; }
    .ps-story-item { min-width: 55px; }
    .ps-creators-grid { grid-template-columns: 1fr !important; }
}