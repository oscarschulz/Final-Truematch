<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>iTrueMatch â€” Select Your Plan</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <script>window.API_BASE = '';</script>
  
  <link rel="stylesheet" href="./style.css" />
  <link rel="stylesheet" href="./animations.css" />
  
  <style>
    /* =========================================
       PAGE SPECIFIC STYLES (Desktop Only)
       ========================================= */
    :root {
      --bg: #0a0f1a;
      --primary: #64E9EE;
      --text: #F6FAFF;
      --muted: #C7D0DC;
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: #000;
      color: var(--text);
      font-family: 'Montserrat', sans-serif;
      height: 100vh; /* FORCE FIXED HEIGHT */
      width: 100vw;
      overflow: hidden; /* DISABLE SCROLLING */
      display: flex;
      flex-direction: column; /* Stack layout vertically */
      min-width: 1200px; 
    }

    /* === ENTRANCE ANIMATIONS === */
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes popIn {
      0% { opacity: 0; transform: scale(0.95) translateY(40px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    /* === Header (Compact) === */
    .tier-header {
      flex: 0 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 50px; 
      width: 100%;
      z-index: 10;
      background: transparent;
      
      /* Animation */
      opacity: 0;
      animation: fadeInDown 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    }

    .brand-area { display: flex; align-items: center; gap: 12px; }
    .brand-logo { height: 38px; width: auto; }
    .brand-text { font-weight: 800; font-size: 1.3rem; letter-spacing: 1px; color: #fff; }

    .nav-actions { display: flex; gap: 1rem; }

    .btn-nav {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      padding: 8px 20px;
      border-radius: 50px;
      font-weight: 600;
      font-size: 0.85rem;
      text-decoration: none;
      transition: all 0.3s ease;
      cursor: pointer;
      display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-nav:hover { background: rgba(255,255,255,0.1); border-color: #fff; transform: translateY(-2px); }
    .btn-nav svg { width: 16px; opacity: 0.8; }

    /* === Main Content === */
    .tier-wrapper {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 0 40px 30px;
      position: relative;
      z-index: 2;
      width: 100%;
    }

    .page-title { 
      text-align: center; 
      margin-bottom: 2vh; 
      flex: 0 0 auto;
      
      /* Animation */
      opacity: 0;
      animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) 0.2s forwards;
    }
    .page-title h1 {
      font-size: 2.2rem; font-weight: 800; margin: 0 0 5px;
      letter-spacing: 1px;
      text-shadow: 0 0 30px rgba(100, 233, 238, 0.4);
    }
    .page-title p { color: var(--muted); font-size: 1rem; max-width: 600px; margin: 0 auto; opacity: 0.8; }

    #tierNotice {
      position: absolute; top: 10px;
      background: rgba(255, 59, 48, 0.15); border: 1px solid rgba(255, 59, 48, 0.4); color: #ff6b6b;
      padding: 10px 20px; border-radius: 12px; display: none; font-weight: 600;
      backdrop-filter: blur(10px);
    }

    /* === Pricing Grid === */
    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      width: 100%;
      max-width: 96vw;
      height: 100%; 
      max-height: 72vh;
      align-items: stretch;
    }

    /* Base Card Style */
    .price-card {
      position: relative;
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(14px);
      border-radius: 18px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 2rem 1.5rem;
      border: 1px solid transparent; 
      height: 100%;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      
      /* ENTRANCE ANIMATION (Fixed) */
      opacity: 0;
      animation: popIn 0.8s cubic-bezier(0.19, 1, 0.22, 1) forwards;
    }

    /* Staggered Delays */
    .price-card:nth-child(1) { animation-delay: 0.3s; }
    .price-card:nth-child(2) { animation-delay: 0.4s; }
    .price-card:nth-child(3) { animation-delay: 0.5s; }
    .price-card:nth-child(4) { animation-delay: 0.6s; }

    /* Hover Interaction */
    .price-card:hover { 
      z-index: 5;
      transform: translateY(-10px) scale(1.02);
      filter: brightness(1.1);
    }

    .card-top-content { display: flex; flex-direction: column; }

    /* Typography */
    .price__tag {
      display: inline-flex; align-items: center; padding: 4px 12px;
      border-radius: 999px; border: 1px solid rgba(255,255,255,0.2);
      font-size: 0.75rem; text-transform: uppercase; font-weight: 700;
      margin-bottom: 1rem; align-self: flex-start;
    }

    .price-card[data-tier="free"] .price__tag { background: rgba(255,255,255,0.1); color: #fff; }
    .price-card[data-tier="plus"] .price__tag { background: rgba(100,233,238,0.1); color: var(--primary); border-color: var(--primary); }
    .price-card[data-tier="elite"] .price__tag { background: rgba(157,78,221,0.2); color: #e0aaff; border-color: #9d4edd; }
    .price-card[data-tier="concierge"] .price__tag { background: rgba(255,215,0,0.2); color: #ffe66d; border-color: #ffd700; }

    .price__value { font-size: 2.2rem; font-weight: 800; margin-bottom: 0.2rem; color: #fff; line-height: 1; }
    .price__value small { font-size: 0.9rem; color: var(--muted); font-weight: 500; }
    
    .price__desc { font-size: 0.9rem; color: var(--muted); line-height: 1.4; margin-bottom: 1.5rem; min-height: 40px; }

    .price__list { padding: 0; list-style: none; margin: 0; }
    .price__list li { display: flex; gap: 10px; margin-bottom: 10px; font-size: 0.85rem; color: rgba(255,255,255,0.85); line-height: 1.3; }
    .price__list li svg { width: 18px; height: 18px; flex-shrink: 0; }

    .price-card[data-tier="free"] { border: 1px solid rgba(255, 255, 255, 0.2); }
    .price-card[data-tier="free"] li svg { color: #fff; }
    
    .price-card[data-tier="plus"] { border: 1px solid var(--primary); box-shadow: 0 0 15px rgba(100, 233, 238, 0.1); }
    .price-card[data-tier="plus"] li svg { color: var(--primary); }

    .price-card[data-tier="elite"] { border: 1px solid #9d4edd; box-shadow: 0 0 15px rgba(157, 78, 221, 0.15); }
    .price-card[data-tier="elite"] li svg { color: #e0aaff; }

    .price-card[data-tier="concierge"] { border: 1px solid #ffd700; box-shadow: 0 0 20px rgba(255, 215, 0, 0.15); }
    .price-card[data-tier="concierge"] li svg { color: #ffe66d; }

    .muted-feature { opacity: 0.4; }

    .btn-select {
      width: 100%; border: none; padding: 14px;
      border-radius: 50px; font-weight: 700; font-size: 0.9rem;
      cursor: pointer; transition: all 0.2s; text-transform: uppercase; letter-spacing: 1px;
      margin-top: 1.5rem;
    }
    .btn-select:disabled { opacity: 0.5; cursor: default; background: #333 !important; color: #888 !important; box-shadow: none !important; }

    .btn-free { background: transparent; border: 1px solid rgba(255,255,255,0.3); color: #fff; }
    .btn-plus { background: var(--primary); color: #000; }
    .btn-elite { background: #9d4edd; color: #fff; }
    .btn-concierge { background: #ffd700; color: #000; }

    .btn-select:not(:disabled):hover { transform: translateY(-2px); filter: brightness(1.15); }
    
    #tm-bg-canvas { position: fixed; inset: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 0; opacity: 0.9; }

    /* =============================================================
       THE BOSS FIX: 1280x800 SPECIFIC ADJUSTMENTS (Locked Layout)
       ============================================================= */
    @media screen and (max-width: 1366px) and (max-height: 850px) {
      .tier-header { padding: 15px 40px; }
      .brand-logo { height: 32px; }
      .page-title { margin-bottom: 1.5rem; }
      .page-title h1 { font-size: 1.8rem; }
      
      .pricing-grid {
        max-width: 98vw;
        gap: 1rem;
        max-height: 70vh; /* Allow slightly more height */
      }

      .price-card { padding: 1.5rem 1.2rem; }
      .price__value { font-size: 1.8rem; }
      .price__desc { font-size: 0.85rem; margin-bottom: 1rem; min-height: 35px; }
      .price__list li { font-size: 0.8rem; margin-bottom: 8px; }
      .btn-select { padding: 12px; margin-top: 1rem; font-size: 0.85rem; }
    }

  </style>
  <link rel="stylesheet" href="./tier.css" />
</head>

<body>
  <canvas id="tm-bg-canvas" aria-hidden="true"></canvas>

  <header class="tier-header">
    <div class="brand-area">
      <img src="../../assets/images/truematch-mark.png" alt="TrueMatch" class="brand-logo" />
      <span class="brand-text">iTrueMatch</span>
    </div>
    <div class="nav-actions">
      <a href="./dashboard.html" class="btn-nav">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5"/><path d="M12 19l-7-7 7-7"/></svg>
        <span>Dashboard</span>
      </a>
</div>
  </header>

  <div class="tier-wrapper">
    <div class="page-title">
      <h1>Choose Your Access</h1>
      <p>Unlock exclusive features to find your perfect match.</p>
    </div>

    <div id="tierNotice"><span id="tierNoticeText"></span></div>

    <!-- Mobile brand (shows above carousel cards) -->
    <div class="tier-mobile-brand" aria-label="iTrueMatch">
      <img src="../assets/images/truematch-mark.png" class="tier-mobile-logo" alt="iTrueMatch logo">
      <span class="tier-mobile-text">iTrueMatch</span>
    </div>


    <div class="pricing-grid">
      <article class="price-card" data-tier="free" data-plan-card="free">
        <div class="card-top-content">
          <span class="price__tag">Member</span>
          <div class="price__value">$0 <small>/mo</small></div>
          <p class="price__desc">Basic access to swipe and browse profiles.</p>
          <ul class="price__list">
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> 20 Daily Swipes</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Basic Profile</li>
            <li class="muted-feature"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg> No Shortlists</li>
            <li class="muted-feature"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg> No Concierge</li>
          </ul>
        </div>
        <button class="btn-select btn-free" type="button" data-plan="free" disabled>Current Plan</button>
      </article>

      <article class="price-card" data-tier="plus" data-plan-card="tier1">
        <div class="card-top-content">
          <span class="price__tag">Plus</span>
          <div class="price__value">$28 <small>/mo</small></div>
          <p class="price__desc">More control, visibility, and unlimited swipes.</p>
          <ul class="price__list">
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Unlimited Swipes</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Advanced Filters</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Read Receipts</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Priority Matching</li>
          </ul>
        </div>
        <button class="btn-select btn-plus" type="button" data-plan="tier1">Select Plus</button>
      </article>

      <article class="price-card" data-tier="elite" data-plan-card="tier2">
        <div class="card-top-content">
          <span class="price__tag">Elite</span>
          <div class="price__value">$95 <small>/mo</small></div>
          <p class="price__desc">For serious, high-value connections.</p>
          <ul class="price__list">
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Elite-only Pool</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Monthly Shortlist</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Higher Visibility</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Soft Concierge</li>
          </ul>
        </div>
        <button class="btn-select btn-elite" type="button" data-plan="tier2">Select Elite</button>
      </article>

      <article class="price-card" data-tier="concierge" data-plan-card="tier3">
        <div class="card-top-content">
          <span class="price__tag">Concierge</span>
          <div class="price__value">$485 <small>/mo</small></div>
          <p class="price__desc">White-glove experience, fully managed.</p>
          <ul class="price__list">
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Human + AI Operator</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Date Coordination</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Personal Scouting</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Limited Slots</li>
          </ul>
        </div>
        <button class="btn-select btn-concierge" type="button" data-plan="tier3">Apply Now</button>
      </article>
    </div>

    <!-- Mobile carousel pills (4 tiers) -->
    <div class="tier-carousel-pills" aria-label="Plan carousel controls">
      <button class="tier-pill is-active" type="button" data-tier-target="free" aria-label="Member plan" title="Member"></button>
      <button class="tier-pill" type="button" data-tier-target="plus" aria-label="Plus plan" title="Plus"></button>
      <button class="tier-pill" type="button" data-tier-target="elite" aria-label="Elite plan" title="Elite"></button>
      <button class="tier-pill" type="button" data-tier-target="concierge" aria-label="Concierge plan" title="Concierge"></button>
    </div>

  </div>

  <script>
  (() => {
    const canvas = document.getElementById('tm-bg-canvas');
    if (!canvas) return;

    const ctx = canvas.getContext('2d', { alpha: true });
    if (!ctx) return;

    const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    const mouse = { x: 0, y: 0, active: false };
    const particles = [];
    let cw = 0, ch = 0, dpr = 1, raf = null;

    const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

    function pickCount() {
      const area = window.innerWidth * window.innerHeight;
      return clamp(Math.floor(area / 22000) + 28, 38, 90);
    }

    function resize() {
      dpr = Math.min(window.devicePixelRatio || 1, 2);
      cw = window.innerWidth;
      ch = window.innerHeight;

      canvas.width = Math.floor(cw * dpr);
      canvas.height = Math.floor(ch * dpr);
      canvas.style.width = cw + 'px';
      canvas.style.height = ch + 'px';

      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

      init();
      draw(true);
    }

    function init() {
      particles.length = 0;
      const count = pickCount();
      for (let i = 0; i < count; i++) {
        particles.push({
          x: Math.random() * cw,
          y: Math.random() * ch,
          vx: (Math.random() - 0.5) * 0.35,
          vy: (Math.random() - 0.5) * 0.35,
          r: 1 + Math.random() * 1.3
        });
      }
    }

    function step() {
      for (const p of particles) {
        p.x += p.vx;
        p.y += p.vy;
        if (p.x < 0 || p.x > cw) p.vx *= -1;
        if (p.y < 0 || p.y > ch) p.vy *= -1;
        p.x = clamp(p.x, 0, cw);
        p.y = clamp(p.y, 0, ch);
        if (mouse.active) {
          const dx = p.x - mouse.x;
          const dy = p.y - mouse.y;
          const dist2 = dx * dx + dy * dy;
          const influence = 220;
          if (dist2 < influence * influence && dist2 > 0.001) {
            const dist = Math.sqrt(dist2);
            const force = (1 - dist / influence) * 0.035;
            p.vx += (dx / dist) * force;
            p.vy += (dy / dist) * force;
          }
        }
        p.vx *= 0.985;
        p.vy *= 0.985;
      }
    }

    function draw(isStatic = false) {
      ctx.clearRect(0, 0, cw, ch);
      ctx.globalCompositeOperation = 'lighter';
      const maxDist = 150;
      const maxDist2 = maxDist * maxDist;
      for (let i = 0; i < particles.length; i++) {
        const a = particles[i];
        for (let j = i + 1; j < particles.length; j++) {
          const b = particles[j];
          const dx = a.x - b.x;
          const dy = a.y - b.y;
          const d2 = dx * dx + dy * dy;
          if (d2 <= maxDist2) {
            const t = 1 - (Math.sqrt(d2) / maxDist);
            const alpha = t * 0.12;
            ctx.strokeStyle = `rgba(255,255,255,${alpha})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(a.x, a.y);
            ctx.lineTo(b.x, b.y);
            ctx.stroke();
          }
        }
      }
      if (mouse.active) {
        const md = 210;
        const md2 = md * md;
        for (const p of particles) {
          const dx = p.x - mouse.x;
          const dy = p.y - mouse.y;
          const d2 = dx * dx + dy * dy;
          if (d2 < md2) {
            const t = 1 - (Math.sqrt(d2) / md);
            const alpha = t * 0.18;
            ctx.strokeStyle = `rgba(100,233,238,${alpha})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(p.x, p.y);
            ctx.lineTo(mouse.x, mouse.y);
            ctx.stroke();
          }
        }
      }
      for (const p of particles) {
        ctx.fillStyle = `rgba(255,255,255,0.55)`;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.globalCompositeOperation = 'source-over';
      if (!reduceMotion && !isStatic) {
        step();
      }
    }

    function loop() {
      draw(false);
      raf = requestAnimationFrame(loop);
    }

    function onMove(e) {
      const x = (e.touches ? e.touches[0].clientX : e.clientX);
      const y = (e.touches ? e.touches[0].clientY : e.clientY);
      mouse.x = x;
      mouse.y = y;
      mouse.active = true;
    }

    function onLeave() { mouse.active = false; }

    window.addEventListener('resize', () => { cancelAnimationFrame(raf); raf = null; resize(); if (!reduceMotion) loop(); }, { passive: true });
    window.addEventListener('mousemove', onMove, { passive: true });
    window.addEventListener('touchstart', onMove, { passive: true });
    window.addEventListener('touchmove', onMove, { passive: true });
    window.addEventListener('mouseleave', onLeave, { passive: true });
    window.addEventListener('touchend', onLeave, { passive: true });

    resize();
    if (!reduceMotion) loop();
  })();
  </script>
  
  <script src="./tm-loader.js"></script>
  <script type="module" src="./tier.js"></script>
</body>
</html>

