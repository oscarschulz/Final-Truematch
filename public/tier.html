<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=1200" />
  <title>TrueMatch â€” Select Your Plan</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <script>window.API_BASE = '';</script>
  
  <link rel="stylesheet" href="./style.css" />
  <link rel="stylesheet" href="./animations.css" />
  
  <style>
    /* =========================================
       PAGE SPECIFIC STYLES (Desktop Only)
       ========================================= */
    :root {
      --bg: #0a0f1a;
      --primary: #64E9EE;
      --text: #F6FAFF;
      --muted: #C7D0DC;
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: #000;
      color: var(--text);
      font-family: 'Montserrat', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      min-width: 1200px; /* Force minimum width */
    }

    /* === ENTRANCE ANIMATIONS === */
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes popIn {
      from { opacity: 0; transform: scale(0.9) translateY(30px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    /* === Header === */
    .tier-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 30px 60px; /* Adjusted padding for wide look */
      width: 100%;        /* Full Width */
      max-width: 100%;    /* Removed the 1400px limit */
      margin: 0;          /* Reset margin */
      z-index: 10;
      
      /* Animation */
      opacity: 0;
      animation: fadeInDown 0.8s ease-out forwards;
    }

    .brand-area { display: flex; align-items: center; gap: 12px; }
    .brand-logo { height: 42px; width: auto; }
    .brand-text { font-weight: 800; font-size: 1.4rem; letter-spacing: 1px; text-transform: uppercase; color: #fff; }

    .nav-actions { display: flex; gap: 1rem; }

    .btn-nav {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      padding: 10px 24px;
      border-radius: 50px;
      font-weight: 600;
      font-size: 0.9rem;
      text-decoration: none;
      transition: all 0.3s ease;
      cursor: pointer;
      display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-nav:hover { background: rgba(255,255,255,0.1); border-color: #fff; transform: translateY(-2px); }
    .btn-nav svg { width: 16px; opacity: 0.8; }

    /* === Main Content === */
    .tier-wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 20px 80px;
      position: relative;
      z-index: 2;
    }

    .page-title { 
      text-align: center; margin-bottom: 3rem; 
      opacity: 0;
      animation: fadeInUp 0.8s ease-out 0.2s forwards; /* Delay start */
    }
    .page-title h1 {
      font-size: 2.8rem; font-weight: 800; margin: 0 0 10px;
      text-transform: uppercase; letter-spacing: 2px;
      text-shadow: 0 0 30px rgba(100, 233, 238, 0.4);
    }
    .page-title p { color: var(--muted); font-size: 1.1rem; max-width: 600px; margin: 0 auto; }

    #tierNotice {
      background: rgba(255, 59, 48, 0.15); border: 1px solid rgba(255, 59, 48, 0.4); color: #ff6b6b;
      padding: 12px 24px; border-radius: 12px; margin-bottom: 30px; display: none; font-weight: 600;
      backdrop-filter: blur(10px);
    }

    /* === Pricing Grid === */
    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr); /* Always 4 columns */
      gap: 2rem;
      max-width: 1400px;
      width: 100%;
      align-items: stretch;
      padding-top: 20px; 
    }

    /* === FLOATING ANIMATION LOGIC === */
    @keyframes floatRhythm {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-15px); }
    }

    /* Base Card Style */
    .price-card {
      position: relative;
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(14px);
      border-radius: 20px;
      padding: 2.5rem 2rem;
      display: flex;
      flex-direction: column;
      border: 1px solid transparent; 
      height: 100%;
      opacity: 0; /* Base state for entrance animation */
    }

    /* Staggered Entrance for Cards */
    .price-card:nth-child(1) { animation: popIn 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) 0.4s forwards, floatRhythm 6s ease-in-out 1s infinite; animation-delay: 0.4s, -3s; }
    .price-card:nth-child(2) { animation: popIn 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) 0.5s forwards, floatRhythm 6s ease-in-out 1.1s infinite; animation-delay: 0.5s, 0s; }
    .price-card:nth-child(3) { animation: popIn 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) 0.6s forwards, floatRhythm 6s ease-in-out 1.2s infinite; animation-delay: 0.6s, -3s; }
    .price-card:nth-child(4) { animation: popIn 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) 0.7s forwards, floatRhythm 6s ease-in-out 1.3s infinite; animation-delay: 0.7s, 0s; }

    /* Hover Interaction */
    .price-card:hover { 
      animation-play-state: paused; 
      z-index: 5;
      transition: box-shadow 0.3s ease, transform 0.3s ease;
      transform: translateY(-20px) scale(1.02) !important; /* Lift on hover */
      filter: brightness(1.1);
    }

    /* TIER COLORS & GLOWS */
    .price-card[data-tier="free"] { border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 0 15px rgba(255, 255, 255, 0.1), inset 0 0 10px rgba(255, 255, 255, 0.05); }
    .price-card[data-tier="free"]:hover { box-shadow: 0 20px 40px rgba(255, 255, 255, 0.15); }
    
    .price-card[data-tier="plus"] { border: 1px solid var(--primary); box-shadow: 0 0 20px rgba(100, 233, 238, 0.25), inset 0 0 10px rgba(100, 233, 238, 0.05); }
    .price-card[data-tier="plus"]:hover { box-shadow: 0 20px 50px rgba(100, 233, 238, 0.4); }

    .price-card[data-tier="elite"] { border: 1px solid #9d4edd; box-shadow: 0 0 20px rgba(157, 78, 221, 0.35), inset 0 0 10px rgba(157, 78, 221, 0.1); }
    .price-card[data-tier="elite"]:hover { box-shadow: 0 20px 50px rgba(157, 78, 221, 0.5); }

    .price-card[data-tier="concierge"] { border: 1px solid #ffd700; box-shadow: 0 0 25px rgba(255, 215, 0, 0.35), inset 0 0 15px rgba(255, 215, 0, 0.1); }
    .price-card[data-tier="concierge"]:hover { box-shadow: 0 20px 60px rgba(255, 215, 0, 0.6); }

    /* Typography */
    .price__tag {
      display: inline-flex; align-items: center; padding: 6px 14px;
      border-radius: 999px; border: 1px solid rgba(255,255,255,0.2);
      font-size: 0.8rem; text-transform: uppercase; font-weight: 700;
      margin-bottom: 1rem; align-self: flex-start;
    }

    .price-card[data-tier="free"] .price__tag { background: rgba(255,255,255,0.1); color: #fff; }
    .price-card[data-tier="plus"] .price__tag { background: rgba(100,233,238,0.1); color: var(--primary); border-color: var(--primary); }
    .price-card[data-tier="elite"] .price__tag { background: rgba(157,78,221,0.2); color: #e0aaff; border-color: #9d4edd; }
    .price-card[data-tier="concierge"] .price__tag { background: rgba(255,215,0,0.2); color: #ffe66d; border-color: #ffd700; }

    .price__value { font-size: 2.5rem; font-weight: 800; margin-bottom: 0.5rem; color: #fff; }
    .price__value small { font-size: 1rem; color: var(--muted); font-weight: 500; }
    
    .price__desc { font-size: 0.95rem; color: var(--muted); line-height: 1.5; margin-bottom: 2rem; min-height: 45px; }

    .price__list { padding: 0; list-style: none; margin: 0 0 2rem; flex: 1; }
    .price__list li { display: flex; gap: 12px; margin-bottom: 14px; font-size: 0.95rem; color: rgba(255,255,255,0.85); line-height: 1.4; }
    .price__list li svg { width: 20px; height: 20px; flex-shrink: 0; }

    .price-card[data-tier="free"] li svg { color: #fff; }
    .price-card[data-tier="plus"] li svg { color: var(--primary); }
    .price-card[data-tier="elite"] li svg { color: #e0aaff; }
    .price-card[data-tier="concierge"] li svg { color: #ffe66d; }

    .muted-feature { opacity: 0.4; }

    /* Selection Button */
    .btn-select {
      width: 100%; border: none; padding: 16px;
      border-radius: 50px; font-weight: 700; font-size: 1rem;
      cursor: pointer; transition: all 0.2s; text-transform: uppercase; letter-spacing: 1px;
      margin-top: auto;
    }
    .btn-select:disabled { opacity: 0.5; cursor: default; background: #333 !important; color: #888 !important; box-shadow: none !important; }

    .btn-free { background: transparent; border: 1px solid rgba(255,255,255,0.3); color: #fff; }
    .btn-plus { background: var(--primary); color: #000; box-shadow: 0 0 15px rgba(0, 242, 234, 0.4); }
    .btn-elite { background: #9d4edd; color: #fff; box-shadow: 0 0 15px rgba(157, 78, 221, 0.4); }
    .btn-concierge { background: #ffd700; color: #000; box-shadow: 0 0 15px rgba(255, 215, 0, 0.4); }

    .btn-select:not(:disabled):hover { transform: translateY(-3px); filter: brightness(1.15); }
    
    .current-plan-card { opacity: 1 !important; }

    #tm-bg-canvas { position: fixed; inset: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 0; opacity: 0.9; }

  </style>
</head>

<body>
  <canvas id="tm-bg-canvas" aria-hidden="true"></canvas>

  <header class="tier-header">
    <div class="brand-area">
      <img src="./assets/images/truematch-mark.png" alt="TrueMatch" class="brand-logo" />
      <span class="brand-text">TrueMatch</span>
    </div>
    <div class="nav-actions">
      <a href="./dashboard.html" class="btn-nav">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5"/><path d="M12 19l-7-7 7-7"/></svg>
        <span>Dashboard</span>
      </a>
      <button id="btnLogout" class="btn-nav" type="button">
        <span>Logout</span>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
      </button>
    </div>
  </header>

  <div class="tier-wrapper">
    <div class="page-title">
      <h1>Choose Your Access</h1>
      <p>Unlock exclusive features to find your perfect match.</p>
    </div>

    <div id="tierNotice"><span id="tierNoticeText"></span></div>

    <div class="pricing-grid">
      <article class="price-card" data-tier="free" data-plan-card="free">
        <span class="price__tag">Member</span>
        <div class="price__value">$0 <small>/mo</small></div>
        <p class="price__desc">Basic access to swipe and browse profiles.</p>
        <ul class="price__list">
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> 20 Daily Swipes</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Basic Profile</li>
          <li class="muted-feature"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg> No Shortlists</li>
          <li class="muted-feature"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg> No Concierge</li>
        </ul>
        <button class="btn-select btn-free" type="button" data-plan="free" disabled>Current Plan</button>
      </article>

      <article class="price-card" data-tier="plus" data-plan-card="tier1">
        <span class="price__tag">Plus</span>
        <div class="price__value">$28 <small>/mo</small></div>
        <p class="price__desc">More control, visibility, and unlimited swipes.</p>
        <ul class="price__list">
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Unlimited Swipes</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Advanced Filters</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Read Receipts</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Priority Matching</li>
        </ul>
        <button class="btn-select btn-plus" type="button" data-plan="tier1">Select Plus</button>
      </article>

      <article class="price-card" data-tier="elite" data-plan-card="tier2">
        <span class="price__tag">Elite</span>
        <div class="price__value">$95 <small>/mo</small></div>
        <p class="price__desc">For serious, high-value connections.</p>
        <ul class="price__list">
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Elite-only Pool</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Monthly Shortlist</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Higher Visibility</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Soft Concierge</li>
        </ul>
        <button class="btn-select btn-elite" type="button" data-plan="tier2">Select Elite</button>
      </article>

      <article class="price-card" data-tier="concierge" data-plan-card="tier3">
        <span class="price__tag">Concierge</span>
        <div class="price__value">$485 <small>/mo</small></div>
        <p class="price__desc">White-glove experience, fully managed.</p>
        <ul class="price__list">
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Human + AI Operator</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Date Coordination</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Personal Scouting</li>
          <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Limited Slots</li>
        </ul>
        <button class="btn-select btn-concierge" type="button" data-plan="tier3">Apply Now</button>
      </article>
    </div>
  </div>

  <script>
  (() => {
    const canvas = document.getElementById('tm-bg-canvas');
    if (!canvas) return;

    const ctx = canvas.getContext('2d', { alpha: true });
    if (!ctx) return;

    const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    const mouse = { x: 0, y: 0, active: false };
    const particles = [];
    let cw = 0, ch = 0, dpr = 1, raf = null;

    const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

    function pickCount() {
      const area = window.innerWidth * window.innerHeight;
      return clamp(Math.floor(area / 22000) + 28, 38, 90);
    }

    function resize() {
      dpr = Math.min(window.devicePixelRatio || 1, 2);
      cw = window.innerWidth;
      ch = window.innerHeight;

      canvas.width = Math.floor(cw * dpr);
      canvas.height = Math.floor(ch * dpr);
      canvas.style.width = cw + 'px';
      canvas.style.height = ch + 'px';

      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

      init();
      draw(true);
    }

    function init() {
      particles.length = 0;
      const count = pickCount();
      for (let i = 0; i < count; i++) {
        particles.push({
          x: Math.random() * cw,
          y: Math.random() * ch,
          vx: (Math.random() - 0.5) * 0.35,
          vy: (Math.random() - 0.5) * 0.35,
          r: 1 + Math.random() * 1.3
        });
      }
    }

    function step() {
      for (const p of particles) {
        p.x += p.vx;
        p.y += p.vy;
        if (p.x < 0 || p.x > cw) p.vx *= -1;
        if (p.y < 0 || p.y > ch) p.vy *= -1;
        p.x = clamp(p.x, 0, cw);
        p.y = clamp(p.y, 0, ch);
        if (mouse.active) {
          const dx = p.x - mouse.x;
          const dy = p.y - mouse.y;
          const dist2 = dx * dx + dy * dy;
          const influence = 220;
          if (dist2 < influence * influence && dist2 > 0.001) {
            const dist = Math.sqrt(dist2);
            const force = (1 - dist / influence) * 0.035;
            p.vx += (dx / dist) * force;
            p.vy += (dy / dist) * force;
          }
        }
        p.vx *= 0.985;
        p.vy *= 0.985;
      }
    }

    function draw(isStatic = false) {
      ctx.clearRect(0, 0, cw, ch);
      ctx.globalCompositeOperation = 'lighter';
      const maxDist = 150;
      const maxDist2 = maxDist * maxDist;
      for (let i = 0; i < particles.length; i++) {
        const a = particles[i];
        for (let j = i + 1; j < particles.length; j++) {
          const b = particles[j];
          const dx = a.x - b.x;
          const dy = a.y - b.y;
          const d2 = dx * dx + dy * dy;
          if (d2 <= maxDist2) {
            const t = 1 - (Math.sqrt(d2) / maxDist);
            const alpha = t * 0.12;
            ctx.strokeStyle = `rgba(255,255,255,${alpha})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(a.x, a.y);
            ctx.lineTo(b.x, b.y);
            ctx.stroke();
          }
        }
      }
      if (mouse.active) {
        const md = 210;
        const md2 = md * md;
        for (const p of particles) {
          const dx = p.x - mouse.x;
          const dy = p.y - mouse.y;
          const d2 = dx * dx + dy * dy;
          if (d2 < md2) {
            const t = 1 - (Math.sqrt(d2) / md);
            const alpha = t * 0.18;
            ctx.strokeStyle = `rgba(100,233,238,${alpha})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(p.x, p.y);
            ctx.lineTo(mouse.x, mouse.y);
            ctx.stroke();
          }
        }
      }
      for (const p of particles) {
        ctx.fillStyle = `rgba(255,255,255,0.55)`;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.globalCompositeOperation = 'source-over';
      if (!reduceMotion && !isStatic) {
        step();
      }
    }

    function loop() {
      draw(false);
      raf = requestAnimationFrame(loop);
    }

    function onMove(e) {
      const x = (e.touches ? e.touches[0].clientX : e.clientX);
      const y = (e.touches ? e.touches[0].clientY : e.clientY);
      mouse.x = x;
      mouse.y = y;
      mouse.active = true;
    }

    function onLeave() { mouse.active = false; }

    window.addEventListener('resize', () => { cancelAnimationFrame(raf); raf = null; resize(); if (!reduceMotion) loop(); }, { passive: true });
    window.addEventListener('mousemove', onMove, { passive: true });
    window.addEventListener('touchstart', onMove, { passive: true });
    window.addEventListener('touchmove', onMove, { passive: true });
    window.addEventListener('mouseleave', onLeave, { passive: true });
    window.addEventListener('touchend', onLeave, { passive: true });

    resize();
    if (!reduceMotion) loop();
  })();
  </script>
  
  <script src="./tm-loader.js"></script>
  <script type="module" src="./tier.js"></script>
</body>
</html>