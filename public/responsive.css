/* =========================================
   RESPONSIVE.CSS - FINAL (Green Moments Button & Fixed Sidebar)
   ========================================= */

/* GLOBAL */
html { -webkit-overflow-scrolling: touch; }

/* ---------------------------------------------------------
   1. DESKTOP / LAPTOP (769px pataas)
   --------------------------------------------------------- */
@media screen and (min-width: 769px) {
  .container { max-width: 100%; padding: 0 10px; }
  .layout { grid-template-columns: 200px 1fr 250px; }
  
  /* Show Sidebars */
  .right-sidebar { display: flex !important; padding: 15px; gap: 10px; }
  .sidebar { display: flex !important; position: static; width: auto; height: 100%; background: #000; border-right: 1px solid rgba(255,255,255,0.15); box-shadow: none; padding: 12px 20px; z-index: 200; opacity: 1; transform: none; pointer-events: auto; }
  
  /* Desktop: Show Footer Logout */
  .sidebar-footer { display: flex; }

  /* Desktop: Hide Mobile Elements */
  .mobile-nav-toggle, .mobile-moments-toggle { display: none !important; }
  .logout-btn-mobile { display: none !important; } 
  
  /* Reset Nav Links */
  .nav-links { display: flex !important; flex-direction: column; gap: 6px; }
  .nav-btn { display: flex; flex-direction: row; width: 100%; aspect-ratio: auto; padding: 12px 16px; background: transparent; border-radius: 99px; font-size: 18px; color: #e7e9ea; border: none; }
  .nav-btn:hover { background: rgba(255, 255, 255, 0.1); }
  .nav-btn.is-active { background: rgba(0, 175, 240, 0.15) !important; color: #00aff0; border: none; box-shadow: none; }
  .nav-btn span { display: inline !important; font-size: 18px; margin-top: 0; font-weight: normal; margin-left: 10px; }
  .brand { display: flex; }
  
  .moments-popup { display: none !important; }
}

/* ---------------------------------------------------------
   2. MOBILE VIEW (768px PABABA)
   --------------------------------------------------------- */
@media screen and (max-width: 768px) {
  
  html, body { overflow-y: auto !important; height: auto !important; position: static; }
  .layout { display: block; overflow-x: hidden; }
  .right-sidebar { display: none !important; }
  .main-feed { grid-column: 1 / -1; width: 100%; border: none; padding: 0; margin-bottom: 80px; }

  /* Hide Desktop Moments */
  #panel-home > div:last-child { display: none !important; }

  /* Mobile: Show In-Menu Logout */
  .logout-btn-mobile { display: flex !important; }
  .sidebar-footer { display: none !important; }

  /* --- LEFT MENU BUTTON --- */
  .mobile-nav-toggle {
    display: flex; align-items: center; justify-content: center;
    position: fixed; bottom: 25px; left: 25px;
    width: 55px; height: 55px;
    border-radius: 50%;
    background: var(--brand-color); color: #fff;
    font-size: 24px; border: none;
    box-shadow: 0 10px 30px rgba(0, 175, 240, 0.6);
    z-index: 10001; cursor: pointer; transition: transform 0.2s;
  }
  .mobile-nav-toggle:active { transform: scale(0.9); }

  /* --- RIGHT MOMENTS BUTTON (GREEN ACTIVE COLOR) --- */
  .mobile-moments-toggle {
    display: flex; align-items: center; justify-content: center;
    position: fixed; bottom: 25px; right: 25px;
    width: 55px; height: 55px;
    border-radius: 50%;
    background: #000;
    
    /* UPDATED: NEON GREEN COLORS (#00ff88) */
    border: 2px solid #00ff88; 
    box-shadow: 0 0 20px rgba(0, 255, 136, 0.4); 
    
    z-index: 10001; cursor: pointer; transition: transform 0.2s;
  }
  
  .mobile-moments-toggle i { 
    font-size: 24px; 
    color: #00ff88; /* Green Icon */
    text-shadow: 0 0 10px rgba(0, 255, 136, 0.6);
  }
  
  .mobile-moments-toggle:active { transform: scale(0.9); }

  /* --- LEFT MENU POPUP (GRID) --- */
  .sidebar {
    position: fixed; bottom: 95px; left: 15px; right: 15px;
    width: auto; height: auto;
    background: rgba(15, 20, 30, 0.98); backdrop-filter: blur(30px);
    border: 1px solid rgba(255,255,255,0.2); border-radius: 24px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.9);
    padding: 20px 15px; z-index: 10000;
    
    /* FIXED: Hide initially & kill animation from HTML */
    display: block;
    visibility: hidden;
    animation: none !important;
    
    opacity: 0; transform: translateY(20px) scale(0.95); pointer-events: none;
    transform-origin: bottom left; transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  .sidebar.is-open { 
    visibility: visible;
    opacity: 1; 
    transform: translateY(0) scale(1); 
    pointer-events: auto; 
  }

  .brand { display: none !important; }
  .nav-links { display: grid !important; grid-template-columns: repeat(4, 1fr); gap: 15px 10px; margin: 0; width: 100%; }
  .nav-btn { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; aspect-ratio: 1; padding: 8px 4px; background: rgba(255,255,255,0.05); border-radius: 16px; border: 1px solid transparent; color: var(--text-muted); font-size: 24px; transition: 0.1s; }
  .nav-btn.is-active { background: rgba(0, 175, 240, 0.2) !important; color: #fff; border: 1px solid rgba(0, 175, 240, 0.5); }
  .nav-btn span { display: block !important; font-size: 10px; font-weight: 600; margin-top: 5px; text-transform: capitalize; text-align: center; }
  .nav-btn i { width: auto; margin: 0; }
  .nav-badge { top: 4px; right: 4px; width: 16px; height: 16px; font-size: 9px; border: 2px solid #1a1a20; }

  /* --- RIGHT MOMENTS POPUP --- */
  .moments-popup {
    position: fixed; bottom: 95px; right: 15px; left: auto;
    width: auto; min-width: 200px;
    background: rgba(15, 20, 30, 0.98); backdrop-filter: blur(30px);
    border: 1px solid rgba(255,255,255,0.2); border-radius: 24px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.9);
    padding: 15px; z-index: 10000;
    opacity: 0; transform: translateY(20px) scale(0.95); pointer-events: none;
    transform-origin: bottom right; transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
    display: flex; flex-direction: column; align-items: center;
  }
  .moments-popup.is-open { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
  .moments-popup h3 { margin: 0 0 12px; font-size: 0.8rem; letter-spacing: 1px; color: var(--muted); text-transform: uppercase; }
  
  .home-top-bar { padding: 15px; }
  .feed-header { position: sticky; top: 0; z-index: 4000; padding-top: max(12px, env(safe-area-inset-top)); }
}

/* SMALL MOBILE */
@media screen and (max-width: 380px) {
  .nav-links { grid-template-columns: repeat(3, 1fr); }
  .nav-btn { font-size: 20px; }
}
/* Desktop: show footer logout, hide the mobile-menu logout */
@media (min-width: 769px){
  #btn-logout { display: flex; }
  .sidebar-footer { display: block; }
  #btn-logout-mobile { display: none; }
}

/* Mobile: show mobile-menu logout, hide the footer logout (avoid duplicate) */
@media (max-width: 768px){
  #btn-logout { display: none; }
  #btn-logout-mobile { display: flex; }
}
